import{_ as e,j as s,L as a}from"./index-C1ozWA1l.js";import{ax as t,r as c,c as i,f as n,z as u,B as l,R as o,L as d,J as r,P as f,u as v,aA as m,A as k,O as p}from"./vendor-p2oL7ibe.js";import{E as g,z as R,ao as h,ap as _,Z as w,aq as y}from"./elementPlus-MWeHapXo.js";const z={class:"kefu-reduce-container"},b={class:"controls-wrapper"},x={class:"kefu-reduce-card"},L={class:"header"},j={class:"title"},E={class:"description"},C={key:0,class:"detecting-section"},D={class:"detecting-text"},N={key:1,class:"environment-section"},T={class:"environment-info"},A={class:"info-item"},B={class:"info-label"},G={class:"info-item"},I={class:"info-label"},P={class:"info-item"},Q={class:"info-label"},S={key:0,class:"redirecting-section"},W={class:"redirecting-text"},Y={key:1,class:"manual-redirect-section"},q={class:"timeout-text"},J={class:"redirect-buttons"},O=e({__name:"kefuReduce",setup(e){const{t:O}=t();m();const Z=c(!0),F=c(null),H=c(null),K=c(!1),M=i(()=>F.value?.isDomestic??!1),U=i(()=>M.value?O("kefuReduce.domestic"):O("kefuReduce.international")),V=i(()=>{const e=F.value?.confidence||"unknown",s={high:O("kefuReduce.confidenceLevels.high"),medium:O("kefuReduce.confidenceLevels.medium"),low:O("kefuReduce.confidenceLevels.low"),unknown:O("kefuReduce.confidenceLevels.unknown")};return s[e]||s.unknown}),X=i(()=>{const e=F.value?.methods||{},s=[];return e.ip&&s.push(O("kefuReduce.methodNames.ip")),e.language&&s.push(O("kefuReduce.methodNames.language")),e.timezone&&s.push(O("kefuReduce.methodNames.timezone")),s.join(O("kefuReduce.separator"))||"-"}),$=async()=>{try{Z.value=!0,K.value=!1;const e=await s({useCache:!0,ipDetection:!0,timeout:5e3});F.value=e,Z.value=!1,e.isDomestic?ee():se(),H.value=setTimeout(()=>{K.value=!0},5e3)}catch(e){Z.value=!1,K.value=!0}},ee=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},se=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},ae=()=>{clearTimeout(H.value),K.value=!1,$()};return n(()=>{$()}),(e,s)=>{const t=g,c=R;return k(),u("div",z,[l("div",b,[o(a,{position:"top-right",class:"language-toggle-wrapper"})]),l("div",x,[l("div",L,[o(t,{class:"header-icon",size:48},{default:r(()=>[o(v(h))]),_:1}),l("h1",j,f(v(O)("kefuReduce.title")),1),l("p",E,f(v(O)("kefuReduce.description")),1)]),Z.value?(k(),u("div",C,[o(t,{class:"loading-icon",size:32},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",D,f(v(O)("kefuReduce.detecting")),1)])):F.value?(k(),u("div",N,[l("div",T,[l("div",A,[l("span",B,f(v(O)("kefuReduce.environmentInfo",{env:U.value})),1),o(t,{class:"status-icon",size:20,color:"#10B981"},{default:r(()=>[o(v(w))]),_:1})]),l("div",G,[l("span",I,f(v(O)("kefuReduce.confidence",{level:V.value})),1)]),l("div",P,[l("span",Q,f(v(O)("kefuReduce.methods",{methods:X.value})),1)])]),K.value?(k(),u("div",Y,[l("p",q,f(v(O)("kefuReduce.redirectTimeout")),1),l("div",J,[o(c,{type:"primary",size:"large",onClick:ee,class:"redirect-button"},{default:r(()=>[p(f(v(O)("kefuReduce.domesticService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1}),o(c,{type:"default",size:"large",onClick:se,class:"redirect-button"},{default:r(()=>[p(f(v(O)("kefuReduce.internationalService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1})]),o(c,{text:"",onClick:ae,class:"retry-button"},{default:r(()=>[o(t,{class:"retry-icon"},{default:r(()=>[o(v(_))]),_:1}),p(" "+f(v(O)("kefuReduce.manualRedirect")),1)]),_:1})])):(k(),u("div",S,[o(t,{class:"redirecting-icon",size:24},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",W,f(v(O)("kefuReduce.redirecting")),1)]))])):d("",!0)])])}}},[["__scopeId","data-v-a5a19f03"]]);export{O as default};
