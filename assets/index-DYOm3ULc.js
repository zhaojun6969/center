import{V as t,S as e,F as n,P as i,W as r,A as a,D as o,a as s,G as u,R as l,b as h,B as d,c,d as p,e as f,f as v,E as _,M as y,C as m,g as w,h as g,i as b,j as S,k as C,l as M,m as E}from"./three.module-0ChKueQ8.js";import{h as T,c as P}from"./camera_utils-Co8Vgt5G.js";import{y as x,r as I,f as O,X as A,z as k,A as R,B as j,L as F,P as D}from"./vendor-Bn3bPSOS.js";import{_ as L}from"./index-BXg9AdUO.js";import"./elementPlus-DTQfcfg-.js";var z=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(t){var e=1.70158;return 1===t?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-z.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*z.Bounce.In(2*t):.5*z.Bounce.Out(2*t-1)+.5}}),generatePow:function(t){return void 0===t&&(t=4),t=(t=t<Number.EPSILON?Number.EPSILON:t)>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(2*e,t)/2:(1-Math.pow(2-2*e,t))/2+.5}}}}),U=function(){return performance.now()},q=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,t)}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var a=r[i];null===(t=a._group)||void 0===t||t.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t;n<i.length;n++){var r=i[n];r._group=void 0,delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(t){return!t.isPlaying()})},t.prototype.update=function(t,e){void 0===t&&(t=U()),void 0===e&&(e=!0);var n=Object.keys(this._tweens);if(0!==n.length)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]],a=!e;r&&!1===r.update(t,a)&&!e&&this.remove(r)}n=Object.keys(this._tweensAddedDuringUpdate)}},t}(),N={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=N.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=N.Utils.Bernstein,o=0;o<=i;o++)n+=r(1-e,i-o)*r(e,o)*t[o]*a(i,o);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=N.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=N.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var a=.5*(n-t),o=.5*(i-e),s=r*r;return(2*e-2*n+a+o)*(r*s)+(-3*e+3*n-2*a-o)*s+a*r+e}}},B=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),W=new q,H=function(){function t(t,e){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=z.Linear.None,this._interpolationFunction=N.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=B.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=t,"object"==typeof e?(this._group=e,e.add(this)):!0===e&&(this._group=W,W.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(t,e){if(void 0===e&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e<0?0:e,this},t.prototype.duration=function(t){return void 0===t&&(t=1e3),this._duration=t<0?0:t,this},t.prototype.dynamic=function(t){return void 0===t&&(t=!1),this._isDynamic=t,this},t.prototype.start=function(t,e){if(void 0===t&&(t=U()),void 0===e&&(e=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var r in this._valuesEnd)i[r]=this._valuesEnd[r];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},t.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},t.prototype._setupProperties=function(t,e,n,i,r){for(var a in n){var o=t[a],s=Array.isArray(o),u=s?"array":typeof o,l=!s&&Array.isArray(n[a]);if("undefined"!==u&&"function"!==u){if(l){if(0===(_=n[a]).length)continue;for(var h=[o],d=0,c=_.length;d<c;d+=1){var p=this._handleRelativeValue(o,_[d]);if(isNaN(p)){l=!1;break}h.push(p)}l&&(n[a]=h)}if("object"!==u&&!s||!o||l)(void 0===e[a]||r)&&(e[a]=o),s||(e[a]*=1),i[a]=l?n[a].slice().reverse():e[a]||0;else{e[a]=s?[]:{};var f=o;for(var v in f)e[a][v]=f[v];i[a]=s?[]:{};var _=n[a];if(!this._isDynamic){var y={};for(var v in _)y[v]=_[v];n[a]=_=y}this._setupProperties(f,e[a],_,i[a],r)}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(t){return void 0===t&&(t=U()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t),this},t.prototype.resume=function(t){return void 0===t&&(t=U()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return t?(t.add(this),this):this},t.prototype.remove=function(){var t;return null===(t=this._group)||void 0===t||t.remove(this),this},t.prototype.delay=function(t){return void 0===t&&(t=0),this._delayTime=t,this},t.prototype.repeat=function(t){return void 0===t&&(t=0),this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return void 0===t&&(t=!1),this._yoyo=t,this},t.prototype.easing=function(t){return void 0===t&&(t=z.Linear.None),this._easingFunction=t,this},t.prototype.interpolation=function(t){return void 0===t&&(t=N.Linear),this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(e,n){var i,r,a=this;if(void 0===e&&(e=U()),void 0===n&&(n=t.autoStartOnUpdate),this._isPaused)return!0;if(!this._goToEnd&&!this._isPlaying){if(!n)return!1;this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,s=this._duration+(null!==(i=this._repeatDelayTime)&&void 0!==i?i:this._delayTime),u=this._duration+this._repeat*s,l=function(){if(0===a._duration)return 1;if(o>u)return 1;var t=Math.trunc(o/s),e=o-t*s,n=Math.min(e/a._duration,1);return 0===n&&o===a._duration?1:n}(),h=this._easingFunction(l);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),0===this._duration||o>=this._duration){if(this._repeat>0){var d=Math.min(Math.trunc((o-this._duration)/s)+1,this._repeat);for(r in isFinite(this._repeat)&&(this._repeat-=d),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,p=this._chainedTweens.length;c<p;c++)this._chainedTweens[c].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,i){for(var r in n)if(void 0!==e[r]){var a=e[r]||0,o=n[r],s=Array.isArray(t[r]),u=Array.isArray(o);!s&&u?t[r]=this._interpolationFunction(o,i):"object"==typeof o&&o?this._updateProperties(t[r],a,o,i):"number"==typeof(o=this._handleRelativeValue(a,o))&&(t[r]=a+(o-a)*i)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t.autoStartOnUpdate=!1,t}(),V=B.nextId,X=W,$=X.getAll.bind(X),G=X.removeAll.bind(X),Q=X.add.bind(X),Y=X.remove.bind(X),K=X.update.bind(X),J={Easing:z,Group:q,Interpolation:N,now:U,Sequence:B,nextId:V,Tween:H,VERSION:"25.0.0",getAll:$,removeAll:G,add:Q,remove:Y,update:K};const Z={class:"card-preview-container"},tt={class:"ui-overlay"},et={class:"controls"},nt={key:0,class:"instructions"},it={key:0,class:"loading-overlay"},rt=7.5,at=L(x({__name:"index",props:{cards:{default:()=>[{id:1,title:"NEBULA ONE",description:"Explore the vast unknown.",color:"#00ffff"},{id:2,title:"CYBER CORE",description:"Digital consciousness.",color:"#ff00ff"},{id:3,title:"QUANTUM LEAP",description:"Beyond physics.",color:"#ffff00"},{id:4,title:"VOID WALKER",description:"Silence in space.",color:"#ff0000"},{id:5,title:"SOLAR FLARE",description:"Power of the sun.",color:"#ff8800"},{id:6,title:"DARK MATTER",description:"Invisible forces.",color:"#9900ff"},{id:7,title:"STAR GATE",description:"Portals to new worlds.",color:"#00ff88"}]}},setup(x){const L=x,z=I(null),U=I(null),q=I(null),N=I(!0),B=I(!1);let W,H,V,X,$,G,Q,Y,K,at,ot,st=0,ut=0,lt=0,ht=0,dt=0,ct=0,pt=0,ft=!1,vt={x:0},_t=null,yt=new t,mt=new E,wt=null,gt=!1,bt=!1;O(async()=>{St(),Ct(),Mt(),window.addEventListener("resize",jt),document.addEventListener("mousemove",At),document.addEventListener("mousedown",kt),document.addEventListener("mouseup",Rt),Ft(),N.value=!1}),A(()=>{window.removeEventListener("resize",jt),document.removeEventListener("mousemove",At),document.removeEventListener("mousedown",kt),document.removeEventListener("mouseup",Rt),ot&&ot.stop(),V&&V.dispose()});const St=()=>{if(!z.value)return;W=new e,W.fog=new n(0,.02),H=new i(75,window.innerWidth/window.innerHeight,.1,1e3),H.position.z=12,H.position.y=0,V=new r({antialias:!0,alpha:!0}),V.setSize(window.innerWidth,window.innerHeight),V.setPixelRatio(window.devicePixelRatio),z.value.appendChild(V.domElement);const t=new a(4210752);W.add(t);const d=new o(16777215,1);d.position.set(0,10,10),W.add(d);const c=new s(65535,2,50);c.position.set(0,0,5),W.add(c),$=new u,W.add($),G=new l,Q=new h},Ct=()=>{const t=new d,e=3e3,n=new Float32Array(9e3),i=new Float32Array(9e3);for(let a=0;a<e;a++){const t=40+60*Math.random(),e=2*Math.PI*Math.random(),r=Math.acos(2*Math.random()-1);n[3*a]=t*Math.sin(r)*Math.cos(e),n[3*a+1]=t*Math.sin(r)*Math.sin(e),n[3*a+2]=t*Math.cos(r),i[3*a]=.5+.5*Math.random(),i[3*a+1]=.5+.5*Math.random(),i[3*a+2]=1}t.setAttribute("position",new c(n,3)),t.setAttribute("color",new c(i,3));const r=new p({size:.15,vertexColors:!0,transparent:!0,opacity:.8,blending:f});X=new v(t,r),W.add(X)},Mt=()=>{const t=((t,e,n)=>{const i=new M,r=-t/2,a=-e/2;return i.moveTo(r,a+n),i.lineTo(r,a+e-n),i.quadraticCurveTo(r,a+e,r+n,a+e),i.lineTo(r+t-n,a+e),i.quadraticCurveTo(r+t,a+e,r+t,a+e-n),i.lineTo(r+t,a+n),i.quadraticCurveTo(r+t,a,r+t-n,a),i.lineTo(r+n,a),i.quadraticCurveTo(r,a,r,a+n),i})(4,6,.2),e={steps:2,depth:.05,bevelEnabled:!0,bevelThickness:.02,bevelSize:.02,bevelSegments:3};for(let n=0;n<21;n++){const i=n%7,r=L.cards[i],a=new u,o=(n-10)*rt;a.position.set(o,0,0);const s=new _(t,e);s.center();const l=new y({color:1118481,roughness:.2,metalness:.8,emissive:new m(r.color),emissiveIntensity:.2}),h=new w(s,l);h.name="back";const d=new g(t),c=Et(r),p=new b(c),f=new S({map:p,side:C}),v=new w(d,f),M=new u;M.name=`flipper_${n}`,h.position.z=0,M.add(h),v.position.z=-.15,v.rotation.y=Math.PI,M.add(v),a.add(M),a.userData={id:r.id,index:n,originalIndex:i,isFlipped:!1,color:r.color},$.add(a)}},Et=t=>{const e=document.createElement("canvas");e.width=512,e.height=768;const n=e.getContext("2d"),i=30;n.beginPath(),n.moveTo(i,0),n.lineTo(482,0),n.quadraticCurveTo(512,0,512,i),n.lineTo(512,738),n.quadraticCurveTo(512,768,482,768),n.lineTo(i,768),n.quadraticCurveTo(0,768,0,738),n.lineTo(0,i),n.quadraticCurveTo(0,0,i,0),n.closePath(),n.clip();const r=n.createLinearGradient(0,0,0,768);return r.addColorStop(0,"#000000"),r.addColorStop(1,"#222222"),n.fillStyle=r,n.fillRect(0,0,512,768),n.strokeStyle=t.color,n.lineWidth=10,n.strokeRect(10,10,492,748),n.fillStyle=t.color,n.font="bold 60px Arial",n.textAlign="center",n.fillText(t.title,256,150),n.fillStyle="#ffffff",n.font="30px Arial",n.fillText(t.description,256,300),n.font="20px Monospace",n.fillStyle="#888888",n.fillText(`ID: ${t.id}`,256,700),e},Tt=async()=>{if(B.value)return ot&&await ot.stop(),B.value=!1,void(cursorGroup.visible=!1);N.value=!0,at||(at=new T.Hands({locateFile:t=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${t}`}),at.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),at.onResults(Pt)),q.value&&(ot=new P.Camera(q.value,{onFrame:async()=>{q.value&&await at.send({image:q.value})},width:1280,height:720}),await ot.start(),B.value=!0,N.value=!1)},Pt=t=>{if(t.multiHandLandmarks&&t.multiHandLandmarks.length>0){const e=t.multiHandLandmarks[0],n=e[8],i=e[4],r=e[9];e[12],e[16],e[20];const a=e[8].y<e[5].y&&e[12].y<e[9].y&&e[16].y<e[13].y&&e[20].y<e[17].y,o=2*(1-n.x)-1,s=-(2*n.y-1);Q.x=o,Q.y=s,((t,e)=>{st=(t+1)/2*window.innerWidth,ut=(1-e)/2*window.innerHeight,U.value&&(U.value.style.display="block")})(o,s);const u=Math.hypot(n.x-i.x,n.y-i.y)<.05;if(((t,e,n)=>{if(!U.value)return;let i,r;t?(i="rgba(255, 51, 51, 0.9)",r="rgba(255, 51, 51, 0.6)"):e&&!n?(i="rgba(51, 255, 51, 0.9)",r="rgba(51, 255, 51, 0.6)"):(i="rgba(255, 255, 255, 0.9)",r="rgba(255, 255, 255, 0.6)");const a=U.value.querySelector(".cursor-ring");a&&(a.style.borderColor=i,a.style.boxShadow=`0 0 20px ${r}, 0 0 40px ${r}, inset 0 0 20px ${r}`)})(u,a,bt),u&&!gt?(gt=!0,bt||xt(!0)):!u&&gt&&(gt=!1,bt&&Ot()),a&&!gt&&!bt){const t=2*(1-r.x)-1;if(Math.abs(t)>.15){const e=3.375*(Math.abs(t)-.15),n=Math.sign(t);pt+=n*e*.12}}}else U.value&&(U.value.style.display="none"),gt=!1},xt=t=>{if(bt&&t)return;G.setFromCamera(Q,H);const e=G.intersectObjects($.children,!0);if(e.length>0){let t=e[0].object;for(;t.parent&&t.parent!==$;)t=t.parent;t.userData&&void 0!==t.userData.index&&It(t)}},It=e=>{if(_t)return;bt=!0,_t=e,yt.copy(e.position.clone()),mt.copy(e.children[0].rotation.clone()),e.userData.carouselOffset=dt;const n=new t;e.getWorldPosition(n),$.remove(e),W.add(e),e.position.copy(n);const i=new t(0,0,8);new J.Tween(e.position).to(i,400).easing(J.Easing.Back.Out).start();const r=e.children[0];new J.Tween(r.rotation).to({y:Math.PI},400).start()},Ot=()=>{if(!_t)return;const e=_t;(e=>{wt&&(W.remove(wt),wt.geometry.dispose(),wt.material.dispose(),wt=null);const n=new d,i=2e3,r=new Float32Array(6e3);K=new Float32Array(6e3),Y=new Float32Array(6e3);const a=new Float32Array(6e3),o=new m(16777215),s=new t;e.getWorldPosition(s);for(let t=0;t<i;t++){const e=4*(Math.random()-.5),n=6*(Math.random()-.5),i=.2*(Math.random()-.5);r[3*t]=s.x+e,r[3*t+1]=s.y+n,r[3*t+2]=s.z+i,K[3*t]=e,K[3*t+1]=n,K[3*t+2]=i,Y[3*t]=.15*(Math.random()-.5),Y[3*t+1]=.15*(Math.random()-.5),Y[3*t+2]=.15*(Math.random()-.5),a[3*t]=o.r,a[3*t+1]=o.g,a[3*t+2]=o.b}n.setAttribute("position",new c(r,3)),n.setAttribute("color",new c(a,3));const u=new p({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:f});wt=new v(n,u),wt.userData={age:0,targetGroup:e,state:"exploding"},W.add(wt)})(e),e.visible=!1,bt=!1,_t=null,W.remove(e),$.add(e);const n=e.userData.carouselOffset||0,i=yt.clone();i.x+=dt-n,e.position.copy(i),e.rotation.set(0,0,0);e.children[0].rotation.set(0,0,0),e.userData.isFlipped=!1},At=t=>{if(!B.value&&(Q.x=t.clientX/window.innerWidth*2-1,Q.y=-t.clientY/window.innerHeight*2+1,ft&&!bt)){const e=t.clientX-vt.x;pt+=.1125*e*.12,vt={x:t.clientX,y:t.clientY}}},kt=t=>{if(!B.value){if(bt)return void Ot();ft=!0,vt={x:t.clientX,y:t.clientY}}},Rt=()=>{B.value||(ft=!1,bt||xt(!0))},jt=()=>{H&&V&&(H.aspect=window.innerWidth/window.innerHeight,H.updateProjectionMatrix(),V.setSize(window.innerWidth,window.innerHeight))},Ft=()=>{requestAnimationFrame(Ft),J.update(),U.value&&(lt+=.3*(st-lt),ht+=.3*(ut-ht),U.value.style.transform=`translate(${lt}px, ${ht}px) translate(-50%, -50%)`),ct+=pt,ct*=.94,ct=Math.max(-4.5,Math.min(4.5,ct)),dt+=ct,$.position.x=dt,pt=0;const e=157.5;if($.children.forEach(t=>{if(t!==_t){const n=t.position.x+dt,i=t.userData.originalX||t.position.x;t.userData.originalX||(t.userData.originalX=i),n<-86.25?t.position.x+=e:n>86.25&&(t.position.x-=e)}}),X&&(X.rotation.y+=5e-4,X.rotation.x+=2e-4),$&&$.children.forEach((t,e)=>{t.visible&&t!==_t&&(t.position.y=.2*Math.sin(.001*Date.now()+e))}),wt){const e=wt.geometry.attributes.position.array,n=e.length/3;wt.userData.age+=1;const i=wt.userData.targetGroup,r=new t;i.getWorldPosition(r);let a=!0;for(let t=0;t<n;t++){const n=3*t,i=3*t+1,o=3*t+2;if(wt.userData.age<60)e[n]+=Y[n],e[i]+=Y[i],e[o]+=Y[o],a=!1;else{const t=r.x+K[n],s=r.y+K[i],u=r.z+K[o];e[n]+=.15*(t-e[n]),e[i]+=.15*(s-e[i]),e[o]+=.15*(u-e[o]),Math.abs(t-e[n])>.1&&(a=!1)}}wt.geometry.attributes.position.needsUpdate=!0,a&&wt.userData.age>60&&(W.remove(wt),wt=null,i.visible=!0)}V.render(W,H)};return(t,e)=>(R(),k("div",Z,[j("div",{ref_key:"canvasContainer",ref:z,class:"canvas-container"},null,512),j("div",{ref_key:"domCursor",ref:U,class:"dom-cursor"},[...e[0]||(e[0]=[j("div",{class:"cursor-ring"},null,-1)])],512),j("video",{ref_key:"videoElement",ref:q,class:"input_video",style:{display:"none"}},null,512),j("div",tt,[j("div",et,[j("button",{onClick:Tt,class:"control-btn"},D(B.value?"Disable Camera":"Enable Camera Control"),1),B.value?(R(),k("div",nt,[...e[1]||(e[1]=[j("p",null,"üëã Open Palm to scroll",-1),j("p",null,"‚òùÔ∏è Point to aim",-1),j("p",null,"ü§è Pinch to extract",-1),j("p",null,"üñêÔ∏è Release to shatter",-1)])])):F("",!0)])]),N.value?(R(),k("div",it,[...e[2]||(e[2]=[j("div",{class:"loader"},"Loading Neural Interface...",-1)])])):F("",!0)]))}}),[["__scopeId","data-v-70b3b428"]]);export{at as default};
