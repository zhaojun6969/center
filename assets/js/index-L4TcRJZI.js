import{_ as e,q as a}from"./index-BrLNRVYc.js";/* empty css                     *//* empty css                    *//* empty css                 */import{az as l,r as s,c as o,j as t,f as u,aB as n,z as i,B as c,P as r,u as d,Q as m,a5 as p,R as v,J as h,L as C,aA as N,A as y,E as b,I as f,O as g}from"./vendor-zwaLhAD5.js";import{al as k,ae as w,b as S,a as V,I as H,E as x,n as $,aj as _}from"./elementPlus-C3N3Ediy.js";import{C as j,S as J}from"./state-BZyqW-14.js";import"./utils-D5HVl94d.js";const A={class:"buy-container"},I={class:"breadcrumb"},q={class:"breadcrumb-item"},U={class:"buy-layout"},X={class:"left-section"},B={class:"section-card"},G={class:"section-title"},M={class:"product-item"},L={class:"product-image"},O=["src","alt"],D={class:"product-details"},T={class:"product-name"},Z={class:"product-desc"},R={class:"product-price"},Q={class:"quantity-section"},z={class:"quantity-selector"},F={class:"qty-value"},E={class:"section-card"},K={class:"section-title"},P={key:0,class:"no-coupon"},W={key:1,class:"coupon-list"},Y=["onClick"],ee={class:"coupon-left"},ae={class:"coupon-amount"},le={class:"coupon-condition"},se={class:"coupon-right"},oe={class:"coupon-name"},te={class:"coupon-expiry"},ue={key:0,class:"coupon-check"},ne={class:"section-card"},ie={class:"section-title"},ce={class:"form-row"},re={class:"form-row"},de={class:"form-row"},me={class:"form-row"},pe={class:"form-row"},ve={class:"form-row"},he={class:"form-row"},Ce={class:"right-section"},Ne={class:"order-summary"},ye={class:"summary-title"},be={class:"summary-row"},fe={class:"summary-label"},ge={class:"summary-value"},ke={class:"summary-row"},we={class:"summary-label"},Se={class:"summary-value"},Ve={key:0,class:"summary-row"},He={class:"summary-label"},xe={class:"summary-value discount"},$e={class:"summary-row"},_e={class:"summary-label"},je={class:"summary-value"},Je={class:"summary-row total"},Ae={class:"summary-label"},Ie={class:"summary-value"},qe=e({__name:"index",setup(e){const qe=N(),Ue=n(),{t:Xe,locale:Be}=l(),Ge=s(1),Me=s(null),Le=s("US"),Oe=s({country:Le.value,firstName:"",lastName:"",postalCode:"",state:"",city:"",address1:"",address2:"",phone:"",saveInfo:!1}),De=s([]),Te=s([]),Ze=s({id:1,name:"D1 标准版",description:"基础AI交互功能",image:"https://images.unsplash.com/photo-1535378437327-b71494663e01?w=400&h=400&fit=crop",price:1299}),Re=s([{id:1,name:"新用户优惠券",display:"¥100",condition:"满¥1000可用",expiry:"2025-12-31",applicable:!0,amount:100,minAmount:1e3},{id:2,name:"满减优惠券",display:"¥200",condition:"满¥2000可用",expiry:"2025-12-31",applicable:!1,amount:200,minAmount:2e3},{id:3,name:"折扣优惠券",display:"9折",condition:"满¥500可用",expiry:"2025-12-31",applicable:!0,discount:.9,minAmount:500}]),Qe=(e,a)=>{try{return new Intl.DisplayNames([Be.value],{type:"region"}).of(e)||a}catch(l){return a}},ze=()=>{const e=(j.getAllCountries()||[]).map(e=>({label:Qe(e.isoCode,e.name),value:e.isoCode})),a=e.find(e=>"CN"===e.value);De.value=a?[a,...e.filter(e=>"CN"!==e.value)]:e},Fe=()=>{const e=J.getStatesOfCountry(Oe.value.country)||[];Te.value=e.map(e=>{let a=e.name;if("CN"===Oe.value.country){const l=e.isoCode?.startsWith("CN-")?e.isoCode:`CN-${e.isoCode}`;a=("zh"===Be.value?{"CN-BJ":"北京市","CN-SH":"上海市","CN-TJ":"天津市","CN-CQ":"重庆市","CN-HE":"河北省","CN-SX":"山西省","CN-NM":"内蒙古自治区","CN-LN":"辽宁省","CN-JL":"吉林省","CN-HL":"黑龙江省","CN-JS":"江苏省","CN-ZJ":"浙江省","CN-AH":"安徽省","CN-FJ":"福建省","CN-JX":"江西省","CN-SD":"山东省","CN-HA":"河南省","CN-HB":"湖北省","CN-HN":"湖南省","CN-GD":"广东省","CN-GX":"广西壮族自治区","CN-HI":"海南省","CN-SC":"四川省","CN-GZ":"贵州省","CN-YN":"云南省","CN-XZ":"西藏自治区","CN-SN":"陕西省","CN-GS":"甘肃省","CN-QH":"青海省","CN-NX":"宁夏回族自治区","CN-XJ":"新疆维吾尔自治区","CN-TW":"台湾省","CN-HK":"香港特别行政区","CN-MO":"澳门特别行政区"}:{"CN-BJ":"Beijing","CN-SH":"Shanghai","CN-TJ":"Tianjin","CN-CQ":"Chongqing","CN-HE":"Hebei","CN-SX":"Shanxi","CN-NM":"Inner Mongolia","CN-LN":"Liaoning","CN-JL":"Jilin","CN-HL":"Heilongjiang","CN-JS":"Jiangsu","CN-ZJ":"Zhejiang","CN-AH":"Anhui","CN-FJ":"Fujian","CN-JX":"Jiangxi","CN-SD":"Shandong","CN-HA":"Henan","CN-HB":"Hubei","CN-HN":"Hunan","CN-GD":"Guangdong","CN-GX":"Guangxi Zhuang Autonomous Region","CN-HI":"Hainan","CN-SC":"Sichuan","CN-GZ":"Guizhou","CN-YN":"Yunnan","CN-XZ":"Tibet Autonomous Region","CN-SN":"Shaanxi","CN-GS":"Gansu","CN-QH":"Qinghai","CN-NX":"Ningxia Hui Autonomous Region","CN-XJ":"Xinjiang Uygur Autonomous Region","CN-TW":"Taiwan","CN-HK":"Hong Kong SAR","CN-MO":"Macau SAR"})[l]||e.name}return{label:a,value:e.isoCode}})},Ee=o(()=>`¥${(Ze.value.price*Ge.value).toLocaleString()}`),Ke=o(()=>{if(!Me.value)return"¥0";const e=Re.value.find(e=>e.id===Me.value);if(!e)return"¥0";const a=Ze.value.price*Ge.value;if(e.amount)return`¥${e.amount}`;if(e.discount){return`¥${(a*(1-e.discount)).toFixed(0)}`}return"¥0"}),Pe=o(()=>"¥0"),We=o(()=>{const e=Ze.value.price*Ge.value;let a=0;if(Me.value){const l=Re.value.find(e=>e.id===Me.value);l&&(l.amount?a=l.amount:l.discount&&(a=e*(1-l.discount)))}return`¥${Math.max(0,e-a).toLocaleString()}`}),Ye=()=>{Ge.value<99&&Ge.value++},ea=()=>{Ge.value>1&&Ge.value--},aa=()=>{qe.push("/shop")},la=()=>{Oe.value.firstName&&Oe.value.lastName&&Oe.value.address1&&Oe.value.city&&Oe.value.phone?((()=>{try{Oe.value.saveInfo&&localStorage.setItem("shop_shipping",JSON.stringify(Oe.value))}catch(e){}})(),alert(Xe("shop.buy.confirmOrder"))):alert(Xe("shop.buy.fillShippingInfo"))};return t(()=>Oe.value.country,()=>{Fe()}),t(()=>Be.value,()=>{ze(),Fe()}),u(()=>{const e=Ue.params.id;e&&console.log("Product ID:",e);try{if(a().isDomestic){Le.value="CN";localStorage.getItem("shop_shipping")||(Oe.value.country="CN")}const e=localStorage.getItem("shop_shipping");e&&Object.assign(Oe.value,JSON.parse(e)),ze(),Fe()}catch(l){}}),(e,a)=>{const l=V,s=S,o=w,t=H,u=_,n=k;return y(),i("div",A,[c("div",I,[c("span",{class:"breadcrumb-item",onClick:aa},r(d(Xe)("shop.title")),1),a[10]||(a[10]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)),c("span",q,r(d(Xe)("shop.buy.title")),1)]),c("div",U,[c("div",X,[c("div",B,[c("h2",G,r(d(Xe)("shop.buy.productInfo")),1),c("div",M,[c("div",L,[c("img",{src:Ze.value.image,alt:Ze.value.name},null,8,O)]),c("div",D,[c("h3",T,r(Ze.value.name),1),c("p",Z,r(Ze.value.description),1),c("div",R,r(Ze.value.price),1)])]),c("div",Q,[c("label",null,r(d(Xe)("shop.buy.quantity")),1),c("div",z,[c("button",{class:"qty-btn",onClick:ea},[...a[11]||(a[11]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M19.5 12h-15"})],-1)])]),c("span",F,r(Ge.value),1),c("button",{class:"qty-btn",onClick:Ye},[...a[12]||(a[12]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])])])])]),c("div",E,[c("h2",K,r(d(Xe)("shop.buy.selectCoupon")),1),0===Re.value.length?(y(),i("div",P,[a[13]||(a[13]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25h-2.25m-7.5-10.5H6.375a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125z"})],-1)),c("p",null,r(d(Xe)("shop.buy.noCoupon")),1)])):(y(),i("div",W,[(y(!0),i(m,null,p(Re.value,e=>(y(),i("div",{key:e.id,class:b(["coupon-item",{selected:Me.value===e.id,disabled:!e.applicable}]),onClick:a=>(e=>{e.applicable&&(Me.value=e.id===Me.value?null:e.id)})(e)},[c("div",ee,[c("div",ae,r(e.display),1),c("div",le,r(e.condition),1)]),c("div",se,[c("div",oe,r(e.name),1),c("div",te,r(e.expiry),1)]),Me.value===e.id?(y(),i("div",ue,[...a[14]||(a[14]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M4.5 12.75l6 6 9-13.5"})],-1)])])):C("",!0)],10,Y))),128))]))]),c("div",ne,[c("h2",ie,r(d(Xe)("shop.buy.shippingAddress")),1),v(n,{model:Oe.value,"label-width":"auto",class:"shipping-form"},{default:h(()=>[c("div",ce,[v(o,{label:e.$t("checkout.country")},{default:h(()=>[v(s,{modelValue:Oe.value.country,"onUpdate:modelValue":a[0]||(a[0]=e=>Oe.value.country=e),placeholder:e.$t("checkout.chooseCountry"),filterable:""},{default:h(()=>[(y(!0),i(m,null,p(De.value,e=>(y(),f(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",re,[v(o,{label:e.$t("checkout.lastName")},{default:h(()=>[v(t,{modelValue:Oe.value.lastName,"onUpdate:modelValue":a[1]||(a[1]=e=>Oe.value.lastName=e),placeholder:e.$t("checkout.lastName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(o,{label:e.$t("checkout.firstName")},{default:h(()=>[v(t,{modelValue:Oe.value.firstName,"onUpdate:modelValue":a[2]||(a[2]=e=>Oe.value.firstName=e),placeholder:e.$t("checkout.firstName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",de,[v(o,{label:e.$t("checkout.postalCode")},{default:h(()=>[v(t,{modelValue:Oe.value.postalCode,"onUpdate:modelValue":a[3]||(a[3]=e=>Oe.value.postalCode=e),placeholder:`${e.$t("checkout.postalCode")} (${e.$t("common.optional")})`},{suffix:h(()=>[v(d(x),null,{default:h(()=>[v(d($))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),v(o,{label:e.$t("checkout.state")},{default:h(()=>[v(s,{modelValue:Oe.value.state,"onUpdate:modelValue":a[4]||(a[4]=e=>Oe.value.state=e),placeholder:e.$t("checkout.chooseState")},{default:h(()=>[(y(!0),i(m,null,p(Te.value,e=>(y(),f(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",me,[v(o,{label:e.$t("checkout.city"),class:"full-width"},{default:h(()=>[v(t,{modelValue:Oe.value.city,"onUpdate:modelValue":a[5]||(a[5]=e=>Oe.value.city=e),placeholder:e.$t("checkout.city")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",pe,[v(o,{label:e.$t("checkout.address1"),class:"full-width"},{default:h(()=>[v(t,{modelValue:Oe.value.address1,"onUpdate:modelValue":a[6]||(a[6]=e=>Oe.value.address1=e),placeholder:e.$t("checkout.address1")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",ve,[v(o,{label:e.$t("checkout.address2"),class:"full-width"},{default:h(()=>[v(t,{modelValue:Oe.value.address2,"onUpdate:modelValue":a[7]||(a[7]=e=>Oe.value.address2=e),placeholder:e.$t("checkout.address2")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),c("div",he,[v(o,{label:e.$t("checkout.phone"),class:"full-width"},{default:h(()=>[v(t,{modelValue:Oe.value.phone,"onUpdate:modelValue":a[8]||(a[8]=e=>Oe.value.phone=e),placeholder:e.$t("checkout.phone")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),v(o,null,{default:h(()=>[v(u,{modelValue:Oe.value.saveInfo,"onUpdate:modelValue":a[9]||(a[9]=e=>Oe.value.saveInfo=e)},{default:h(()=>[g(r(e.$t("checkout.saveInfo")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),c("div",Ce,[c("div",Ne,[c("h2",ye,r(d(Xe)("shop.buy.confirmOrder")),1),c("div",be,[c("span",fe,r(d(Xe)("shop.buy.productInfo")),1),c("span",ge,r(Ze.value.name)+" x "+r(Ge.value),1)]),c("div",ke,[c("span",we,r(d(Xe)("shop.buy.subtotal")),1),c("span",Se,r(Ee.value),1)]),Me.value?(y(),i("div",Ve,[c("span",He,r(d(Xe)("shop.buy.discount")),1),c("span",xe,"-"+r(Ke.value),1)])):C("",!0),c("div",$e,[c("span",_e,r(d(Xe)("shop.buy.shippingFee")),1),c("span",je,r(Pe.value),1)]),a[15]||(a[15]=c("div",{class:"summary-divider"},null,-1)),c("div",Je,[c("span",Ae,r(d(Xe)("shop.buy.total")),1),c("span",Ie,r(We.value),1)]),c("button",{class:"submit-btn",onClick:la},r(d(Xe)("shop.buy.submitOrder")),1)])])])])}}},[["__scopeId","data-v-ef3d67c2"]]);export{qe as default};
