import{r as e,d as t}from"./index-B4iIxVom.js";class r{static stripe=null;static isInitializing=!1;static initPromise=null;constructor(){}async init(){}async createPaymentIntent(e,t="usd",i={}){return await this.init(),new Promise(async(e,t)=>{let i={client_secret:"pi_3SZS2UG9Oq8PDokQ1mYY4ntx_secret_pAE1H7ySo6EN1XO1lRsj5SWYn"};{const t=r.stripe.elements({clientSecret:i.client_secret,appearance:{theme:"stripe"}});e({client_secret:i.client_secret,element:t,cardElement:t.create("payment")})}})}async confirmPaymentIntent(e,t){return await this.init(),new Promise(async(i,n)=>{const{error:s,paymentIntent:c}=await r.stripe.confirmPayment({elements:e,confirmParams:{receipt_email:t},redirect:"if_required"});s?n(s.message):c&&"succeeded"===c.status&&i({paymentIntent:c})})}async createCheckoutSession(i){return await this.init(),new Promise(async(n,s)=>{let c={payment_method_types:["card"],line_items:i,success_url:"",cancel_url:"",mode:"payment"},a=await e.common(t.createCheckoutSession,c);if(0===a.code){let{id:e}=a.data;const{error:t}=await r.stripe.redirectToCheckout({sessionId:e});t?s(t.message):n(e)}else s(a.msg)})}async createPayorOrder(r,i=1){let n="";return new Promise(async(s,c)=>{let a={};switch(i){case 1:n=`${window.location.origin}/#/order-management`,a={product_id:r.product_id,methods:["card"],success_url:n,cancel_url:n,quantity:r.quantity,project_id:r.project_id,project_details:r.project_details,order_info:r.order_info,coupon_ids:r.coupon_ids||[]},r.shop_id&&(a.shop_id=r.shop_id);break;case 2:n=`${window.location.origin}/#/user-center`,a={package_id:r.package_id,methods:["card"],success_url:n,cancel_url:n,coupon_ids:r.coupon_ids||[]};break;case 3:n=`${window.location.origin}/#/order-management`,a={goods_id:r.goods_id,quantity:r.quantity,methods:["card"],success_url:n,cancel_url:n,coupon_ids:r.coupon_ids||[],order_info:r.order_info}}let o={1:t.createPayorOrder,2:t.CREATE_RECHARGE_ORDER,3:t.createOrderPurchase}[i],d=await e.common(o,a);if(0==d.code){let e=d.data;return e.url||e.payment_url}c(d.msg)})}}export{r as P};
