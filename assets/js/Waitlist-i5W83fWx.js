import{_ as e,u as s}from"./index-B4iIxVom.js";/* empty css                 */import{az as t,r as i,j as a,aA as l,z as o,B as c,P as r,u as n,R as d,A as u}from"./vendor-ClluBQmh.js";import{U as v}from"./index-Ok4h_PKJ.js";import{H as p,d as m}from"./elementPlus-5sGCOaHt.js";import"./utils-D5ZNaMwG.js";const w={class:"waitlist-container"},b={class:"waitlist-content"},h={class:"waitlist-title"},g={class:"waitlist-description"},f={class:"invite-code-section"},k={class:"invite-code-prompt",style:{color:"#6b46c1"}},y={class:"action-buttons"},C=["disabled"],j=e({__name:"Waitlist",setup(e){const{t:j}=t(),x=l(),_=s(),z=new v,B=i(""),I=i(!1),P=()=>{x.replace("/")},U=async()=>{try{await _.logout(()=>{m.success("退出登录成功"),x.replace("/login")})}catch(e){console.error("退出登录失败:",e),m.error("退出登录失败，请稍后重试")}},V=async()=>{if(B.value.trim()){I.value=!0;try{const e=await z.upgrade({inviteCode:B.value});0===e.code?(await _.updateUserInfo(),m.success("升级成功"),x.replace("/czhome")):m.error(e.message||"升级失败")}catch(e){console.error("升级失败:",e),m.error(e.message||"升级失败，请稍后重试")}finally{I.value=!1}}};return a(()=>{const e=_.user?.userRole;1!=e&&2!=e||x.replace("/czhome")}),(e,s)=>{const t=p;return u(),o("div",w,[c("div",b,[s[1]||(s[1]=c("div",{class:"waitlist-icon"},[c("svg",{width:"120",height:"120",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{cx:"12",cy:"12",r:"10",stroke:"#6B46C1","stroke-width":"2",fill:"rgba(107, 70, 193, 0.1)"}),c("path",{d:"M9 12L11 14L15 10",stroke:"#6B46C1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),c("div",h,r(n(j)("waitlist.title")),1),c("div",g,r(n(j)("waitlist.description")),1),c("div",f,[c("div",k,r(n(j)("waitlist.hasInviteCode")),1),d(t,{modelValue:B.value,"onUpdate:modelValue":s[0]||(s[0]=e=>B.value=e),placeholder:n(j)("waitlist.inviteCodePlaceholder"),class:"invite-code-input",clearable:""},null,8,["modelValue","placeholder"])]),c("div",y,[c("button",{class:"primary-button",onClick:V,disabled:I.value},r(n(j)("waitlist.submitInviteCode")),9,C),c("button",{class:"secondary-button",onClick:P},r(n(j)("waitlist.goHome")),1),c("button",{class:"logout-button",onClick:U},r(n(j)("waitlist.logout")),1)])]),s[2]||(s[2]=c("div",{class:"decoration"},[c("div",{class:"circle circle-1"}),c("div",{class:"circle circle-2"}),c("div",{class:"circle circle-3"})],-1))])}}},[["__scopeId","data-v-b1b16c69"]]);export{j as default};
