import{_ as e,k as s,a}from"./index-7lN_iYAB.js";import{az as t,r as c,c as i,f as n,z as u,B as l,R as o,L as d,J as r,P as f,u as v,aA as m,A as k,O as p}from"./vendor-zwaLhAD5.js";import{E as g,F as R,an as h,ao as _,Y as w,ap as y}from"./elementPlus-CAPqDV7g.js";import"./utils-D5HVl94d.js";const z={class:"kefu-reduce-container"},b={class:"controls-wrapper"},x={class:"kefu-reduce-card"},j={class:"header"},E={class:"title"},L={class:"description"},C={key:0,class:"detecting-section"},D={class:"detecting-text"},N={key:1,class:"environment-section"},T={class:"environment-info"},Y={class:"info-item"},A={class:"info-label"},B={class:"info-item"},G={class:"info-label"},I={class:"info-item"},P={class:"info-label"},Q={key:0,class:"redirecting-section"},S={class:"redirecting-text"},W={key:1,class:"manual-redirect-section"},F={class:"timeout-text"},J={class:"redirect-buttons"},O=e({__name:"kefuReduce",setup(e){const{t:O}=t();m();const q=c(!0),H=c(null),K=c(null),M=c(!1),U=i(()=>H.value?.isDomestic??!1),V=i(()=>U.value?O("kefuReduce.domestic"):O("kefuReduce.international")),X=i(()=>{const e=H.value?.confidence||"unknown",s={high:O("kefuReduce.confidenceLevels.high"),medium:O("kefuReduce.confidenceLevels.medium"),low:O("kefuReduce.confidenceLevels.low"),unknown:O("kefuReduce.confidenceLevels.unknown")};return s[e]||s.unknown}),Z=i(()=>{const e=H.value?.methods||{},s=[];return e.ip&&s.push(O("kefuReduce.methodNames.ip")),e.language&&s.push(O("kefuReduce.methodNames.language")),e.timezone&&s.push(O("kefuReduce.methodNames.timezone")),s.join(O("kefuReduce.separator"))||"-"}),$=async()=>{try{q.value=!0,M.value=!1;const e=await s({useCache:!0,ipDetection:!0,timeout:5e3});H.value=e,q.value=!1,e.isDomestic?ee():se(),K.value=setTimeout(()=>{M.value=!0},5e3)}catch(e){console.error("环境检测失败:",e),q.value=!1,M.value=!0}},ee=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},se=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},ae=()=>{clearTimeout(K.value),M.value=!1,$()};return n(()=>{$()}),(e,s)=>{const t=g,c=R;return k(),u("div",z,[l("div",b,[o(a,{position:"top-right",class:"language-toggle-wrapper"})]),l("div",x,[l("div",j,[o(t,{class:"header-icon",size:48},{default:r(()=>[o(v(h))]),_:1}),l("h1",E,f(v(O)("kefuReduce.title")),1),l("p",L,f(v(O)("kefuReduce.description")),1)]),q.value?(k(),u("div",C,[o(t,{class:"loading-icon",size:32},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",D,f(v(O)("kefuReduce.detecting")),1)])):H.value?(k(),u("div",N,[l("div",T,[l("div",Y,[l("span",A,f(v(O)("kefuReduce.environmentInfo",{env:V.value})),1),o(t,{class:"status-icon",size:20,color:"#10B981"},{default:r(()=>[o(v(w))]),_:1})]),l("div",B,[l("span",G,f(v(O)("kefuReduce.confidence",{level:X.value})),1)]),l("div",I,[l("span",P,f(v(O)("kefuReduce.methods",{methods:Z.value})),1)])]),M.value?(k(),u("div",W,[l("p",F,f(v(O)("kefuReduce.redirectTimeout")),1),l("div",J,[o(c,{type:"primary",size:"large",onClick:ee,class:"redirect-button"},{default:r(()=>[p(f(v(O)("kefuReduce.domesticService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1}),o(c,{type:"default",size:"large",onClick:se,class:"redirect-button"},{default:r(()=>[p(f(v(O)("kefuReduce.internationalService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1})]),o(c,{text:"",onClick:ae,class:"retry-button"},{default:r(()=>[o(t,{class:"retry-icon"},{default:r(()=>[o(v(_))]),_:1}),p(" "+f(v(O)("kefuReduce.manualRedirect")),1)]),_:1})])):(k(),u("div",Q,[o(t,{class:"redirecting-icon",size:24},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",S,f(v(O)("kefuReduce.redirecting")),1)]))])):d("",!0)])])}}},[["__scopeId","data-v-a5a19f03"]]);export{O as default};
