import{_ as e,j as s,a}from"./index-B4iIxVom.js";import{az as t,r as c,c as i,j as n,z as u,B as l,R as o,L as d,J as r,P as f,u as v,aA as m,A as k,O as p}from"./vendor-ClluBQmh.js";import{E as g,D as R,ai as h,aj as _,a0 as w,ak as y}from"./elementPlus-5sGCOaHt.js";import"./utils-D5ZNaMwG.js";const z={class:"kefu-reduce-container"},b={class:"controls-wrapper"},j={class:"kefu-reduce-card"},x={class:"header"},E={class:"title"},L={class:"description"},C={key:0,class:"detecting-section"},D={class:"detecting-text"},N={key:1,class:"environment-section"},T={class:"environment-info"},A={class:"info-item"},B={class:"info-label"},G={class:"info-item"},I={class:"info-label"},P={class:"info-item"},Q={class:"info-label"},S={key:0,class:"redirecting-section"},W={class:"redirecting-text"},Y={key:1,class:"manual-redirect-section"},J={class:"timeout-text"},O={class:"redirect-buttons"},q=e({__name:"kefuReduce",setup(e){const{t:q}=t();m();const F=c(!0),H=c(null),K=c(null),M=c(!1),U=i(()=>H.value?.isDomestic??!1),V=i(()=>U.value?q("kefuReduce.domestic"):q("kefuReduce.international")),X=i(()=>{const e=H.value?.confidence||"unknown",s={high:q("kefuReduce.confidenceLevels.high"),medium:q("kefuReduce.confidenceLevels.medium"),low:q("kefuReduce.confidenceLevels.low"),unknown:q("kefuReduce.confidenceLevels.unknown")};return s[e]||s.unknown}),Z=i(()=>{const e=H.value?.methods||{},s=[];return e.ip&&s.push(q("kefuReduce.methodNames.ip")),e.language&&s.push(q("kefuReduce.methodNames.language")),e.timezone&&s.push(q("kefuReduce.methodNames.timezone")),s.join(q("kefuReduce.separator"))||"-"}),$=async()=>{try{F.value=!0,M.value=!1;const e=await s({useCache:!0,ipDetection:!0,timeout:5e3});H.value=e,F.value=!1,e.isDomestic?ee():se(),K.value=setTimeout(()=>{M.value=!0},5e3)}catch(e){console.error("环境检测失败:",e),F.value=!1,M.value=!0}},ee=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},se=()=>{window.location.href="https://discord.gg/Q2EaEGYW"},ae=()=>{clearTimeout(K.value),M.value=!1,$()};return n(()=>{$()}),(e,s)=>{const t=g,c=R;return k(),u("div",z,[l("div",b,[o(a,{position:"top-right",class:"language-toggle-wrapper"})]),l("div",j,[l("div",x,[o(t,{class:"header-icon",size:48},{default:r(()=>[o(v(h))]),_:1}),l("h1",E,f(v(q)("kefuReduce.title")),1),l("p",L,f(v(q)("kefuReduce.description")),1)]),F.value?(k(),u("div",C,[o(t,{class:"loading-icon",size:32},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",D,f(v(q)("kefuReduce.detecting")),1)])):H.value?(k(),u("div",N,[l("div",T,[l("div",A,[l("span",B,f(v(q)("kefuReduce.environmentInfo",{env:V.value})),1),o(t,{class:"status-icon",size:20,color:"#10B981"},{default:r(()=>[o(v(w))]),_:1})]),l("div",G,[l("span",I,f(v(q)("kefuReduce.confidence",{level:X.value})),1)]),l("div",P,[l("span",Q,f(v(q)("kefuReduce.methods",{methods:Z.value})),1)])]),M.value?(k(),u("div",Y,[l("p",J,f(v(q)("kefuReduce.redirectTimeout")),1),l("div",O,[o(c,{type:"primary",size:"large",onClick:ee,class:"redirect-button"},{default:r(()=>[p(f(v(q)("kefuReduce.domesticService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1}),o(c,{type:"default",size:"large",onClick:se,class:"redirect-button"},{default:r(()=>[p(f(v(q)("kefuReduce.internationalService"))+" ",1),o(t,{class:"button-icon"},{default:r(()=>[o(v(y))]),_:1})]),_:1})]),o(c,{text:"",onClick:ae,class:"retry-button"},{default:r(()=>[o(t,{class:"retry-icon"},{default:r(()=>[o(v(_))]),_:1}),p(" "+f(v(q)("kefuReduce.manualRedirect")),1)]),_:1})])):(k(),u("div",S,[o(t,{class:"redirecting-icon",size:24},{default:r(()=>[o(v(_),{class:"is-loading"})]),_:1}),l("p",W,f(v(q)("kefuReduce.redirecting")),1)]))])):d("",!0)])])}}},[["__scopeId","data-v-a5a19f03"]]);export{q as default};
