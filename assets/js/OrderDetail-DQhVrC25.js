import{r as e,c as a,d as s,_ as t}from"./index-B4iIxVom.js";/* empty css                 *//* empty css                    *//* empty css                         */import{z as i,A as l,B as r,R as n,P as o,J as c,Q as d,a5 as u,I as p,u as m,E as v,O as g,L as E,az as _,aB as y,aA as I,r as f,c as R,w as D,j as N}from"./vendor-ClluBQmh.js";import{Y as O,S as T,E as h,u as P,Z as C,Q as S,_ as A,$ as F,a0 as L,o as k,a1 as M,a2 as b,a3 as w,U as Y,N as V,D as $,a4 as j,a5 as x,a6 as U}from"./elementPlus-5sGCOaHt.js";import{g as B,O as G}from"./OrderManagement-qaC_AxMN.js";/* empty css                                                                          */import{d as H}from"./date-CgH6eVIF.js";import"./utils-D5ZNaMwG.js";var X={};class q{RULE=(()=>"undefined"!=typeof window?"client":"undefined"!=typeof process?X.VITE_PROJECTTYPE:void 0)();ship(s){let t={orderId:s.orderId,orderNo:s.orderNo,trackingNo:s.trackingNo,logisticsCompanyCode:s.logisticsCompanyCode,logisticsCompany:s.logisticsCompany,customerName:s.customerName,remark:s.remark};return e.common(a.sh_ship,t)}getLogisticsByOrderId(t){const i="client"===this.RULE?s.wl_get_by_order:a.wl_get_by_order,l={url:i.url.replace("ORDER_ID",t.orderId),method:i.method,isLoading:i.isLoading};return e.common(l,{})}refreshLogisticsByOrderId(t){t.orderId;const i="client"===this.RULE?s.wl_refresh:a.wl_refresh,l={url:i.url.replace("ORDER_ID",t.orderId),method:i.method,isLoading:i.isLoading};return e.common(l,{})}}const z={class:"logistics-timeline"},Q={class:"timeline-header"},J={class:"tracking-number"},Z={class:"event-header"},K={class:"event-title"},W={class:"event-content"},ee={class:"event-description"},ae={key:0,class:"event-operator"},se={class:"logistics-info"},te={class:"info-card"},ie={class:"card-header"},le={class:"card-content"},re={class:"info-row"},ne={class:"label"},oe={class:"value"},ce={class:"info-row"},de={class:"label"},ue={class:"value"},pe={class:"info-row"},me={class:"label"},ve={class:"value"},ge={class:"info-card"},Ee={class:"card-header"},_e={class:"card-content"},ye={class:"location-info"},Ie={class:"current-address"},fe={class:"status-update"},Re=t({__name:"LogisticsTimeline",props:{orderId:{type:String,required:!0},trackingNumber:{type:String,default:""},timelineEvents:{type:Array,default:()=>[]},logisticsInfo:{type:Object,default:()=>({})}},emits:["refresh"],setup(e,{emit:a}){const s={ORDER_CREATED:"order_created",PAYMENT_CONFIRMED:"payment_confirmed",PROCESSING:"processing",SHIPPED:"shipped",IN_TRANSIT:"in_transit",OUT_FOR_DELIVERY:"out_for_delivery",EXCEPTION:"exception"},t=e=>({[s.ORDER_CREATED]:Y,[s.PAYMENT_CONFIRMED]:L,[s.PROCESSING]:w,[s.SHIPPED]:b,[s.IN_TRANSIT]:S,[s.OUT_FOR_DELIVERY]:M,[s.DELIVERED]:k,[s.EXCEPTION]:L}[e]||L),_=e=>({[s.DELIVERED]:"success",[s.EXCEPTION]:"danger",[s.SHIPPED]:"primary",[s.PROCESSING]:"warning"}[e]||"info"),y=e=>({[s.ORDER_CREATED]:"订单已创建",[s.PAYMENT_CONFIRMED]:"支付确认",[s.PROCESSING]:"订单处理中",[s.SHIPPED]:"已发货",[s.IN_TRANSIT]:"运输中",[s.OUT_FOR_DELIVERY]:"派送中",[s.DELIVERED]:"已送达",[s.EXCEPTION]:"异常状态"}[e]||"未知状态"),I=e=>({[s.ORDER_CREATED]:"已完成",[s.PAYMENT_CONFIRMED]:"已完成",[s.PROCESSING]:"进行中",[s.SHIPPED]:"已完成",[s.IN_TRANSIT]:"进行中",[s.OUT_FOR_DELIVERY]:"进行中",[s.DELIVERED]:"已完成",[s.EXCEPTION]:"需处理"}[e]||"未知"),f=e=>({[s.ORDER_CREATED]:"completed",[s.PAYMENT_CONFIRMED]:"completed",[s.PROCESSING]:"processing",[s.SHIPPED]:"completed",[s.IN_TRANSIT]:"processing",[s.OUT_FOR_DELIVERY]:"processing",[s.DELIVERED]:"completed",[s.EXCEPTION]:"pending"}[e]||"pending"),R=e=>({[s.ORDER_CREATED]:"info",[s.PAYMENT_CONFIRMED]:"success",[s.PROCESSING]:"warning",[s.SHIPPED]:"primary",[s.IN_TRANSIT]:"warning",[s.OUT_FOR_DELIVERY]:"warning",[s.DELIVERED]:"success",[s.EXCEPTION]:"danger"}[e]||"info");return(a,D)=>{const N=T,L=h,k=O,M=C;return l(),i("div",z,[r("div",Q,[r("h3",null,o(a.$t("logistics.title")),1),r("span",J,o(a.$t("logistics.trackingNumber"))+": "+o(e.trackingNumber),1)]),n(M,null,{default:c(()=>[(l(!0),i(d,null,u(e.timelineEvents,(e,a)=>{return l(),p(k,{key:a,timestamp:m(H).formatDate(e.timestamp),color:(d=e.type,document.documentElement.classList.contains("dark")?{[s.ORDER_CREATED]:"#9CA3AF",[s.PAYMENT_CONFIRMED]:"#60A5FA",[s.PROCESSING]:"#FBBF24",[s.SHIPPED]:"#A78BFA",[s.IN_TRANSIT]:"#34D399",[s.OUT_FOR_DELIVERY]:"#FB923C",[s.DELIVERED]:"#4ADE80",[s.EXCEPTION]:"#F87171"}[d]||"#9CA3AF":{[s.ORDER_CREATED]:"#909399",[s.PAYMENT_CONFIRMED]:"#409EFF",[s.PROCESSING]:"#E6A23C",[s.SHIPPED]:"#8B5CF6",[s.IN_TRANSIT]:"#00BFA6",[s.OUT_FOR_DELIVERY]:"#FF9800",[s.DELIVERED]:"#4CAF50",[s.EXCEPTION]:"#F44336"}[d]||"#909399"),icon:t(e.type),type:_(e.type),size:0===a?"large":"normal",placement:"top"},{default:c(()=>[r("div",{class:v(["timeline-event",f(e.type)])},[r("div",Z,[r("span",K,o(y(e.type)),1),n(N,{type:R(e.type),size:"small"},{default:c(()=>[g(o(I(e.type)),1)]),_:2},1032,["type"])]),r("div",W,[r("p",ee,o(e.description),1),e.operator?(l(),i("div",ae,[n(L,null,{default:c(()=>[n(m(P))]),_:1}),r("span",null,o(e.operator),1)])):E("",!0)])],2)]),_:2},1032,["timestamp","color","icon","type","size"]);var d}),128))]),_:1}),r("div",se,[r("div",te,[r("div",ie,[n(L,null,{default:c(()=>[n(m(S))]),_:1}),r("span",null,o(a.$t("logistics.carrierInfo")),1)]),r("div",le,[r("div",re,[r("span",ne,o(a.$t("logistics.carrier"))+":",1),r("span",oe,o(e.logisticsInfo.carrier||"顺丰速运"),1)]),r("div",ce,[r("span",de,o(a.$t("logistics.service"))+":",1),r("span",ue,o(e.logisticsInfo.service||"标准快递"),1)]),r("div",pe,[r("span",me,o(a.$t("logistics.estimatedDelivery"))+":",1),r("span",ve,o(m(H).formatDate(e.logisticsInfo.estimatedDelivery)),1)])])]),r("div",ge,[r("div",Ee,[n(L,null,{default:c(()=>[n(m(A))]),_:1}),r("span",null,o(a.$t("logistics.currentLocation")),1)]),r("div",_e,[r("div",ye,[r("p",Ie,o(e.logisticsInfo.currentLocation||"北京市朝阳区分拣中心"),1),r("div",fe,[n(L,null,{default:c(()=>[n(m(F))]),_:1}),r("span",null,o(a.$t("logistics.lastUpdate"))+": "+o(m(H).formatDate(e.logisticsInfo.lastUpdate)),1)])])])])])])}}},[["__scopeId","data-v-ac75861b"]]),De={key:0,class:"order-detail"},Ne={class:"detail-header"},Oe={class:"header-left"},Te={class:"detail-grid"},he={class:"detail-card"},Pe={class:"card-title"},Ce={class:"products-list"},Se={class:"product-item"},Ae=["src","alt"],Fe={class:"product-info"},Le={class:"name"},ke={style:{"margin-top":"10px"},class:"qty"},Me={class:"price"},be={class:"detail-card"},we={class:"card-title"},Ye={class:"payment-info"},Ve={key:0},$e={key:0,class:"expired-notice",style:{"margin-top":"10px"}},je={class:"detail-card"},xe={class:"card-title"},Ue={style:{"margin-top":"16px"}},Be={style:{"margin-top":"16px"}},Ge={style:{"margin-top":"16px"}},He={key:0,class:"timeline-section"},Xe={key:0},qe={class:"logistics-timeline"},ze={class:"timeline-header"},Qe={class:"tracking-number"},Je={class:"logistics-content-wrapper"},Ze={class:"logistics-info"},Ke={class:"info-card"},We={class:"card-header"},ea={class:"card-content"},aa={class:"info-row"},sa={class:"label"},ta={class:"value"},ia={class:"info-row"},la={class:"label"},ra={class:"info-row"},na={class:"label"},oa={class:"value"},ca={class:"logistics-timeline-container"},da={class:"timeline-title"},ua={class:"logistics-item"},pa={class:"logistics-content"},ma={key:0,class:"logistics-location"},va={key:1,class:"loading-container"},ga={key:2,class:"no-logistics-data"},Ea={key:1,class:"timeline-section"},_a=t({__name:"OrderDetail",setup(e){const a=new G,{t:s}=_(),t=y(),v=I(),P=f(null),A=f(null),F=f(!1),L=R(()=>{let e={};return P.value?.order_info?.ipName?e={image:P.value?.order_info?.modelData?.imageUrl,alt:P.value?.order_info?.ipName,goodName:P.value?.order_info?.ipName||"rob",quantity:P.value?.order_info?.quantity,currency:P.value?.currency,amount:P.value?.actual_amount,shipping:P.value?.order_info?.shipping}:P.value?.order_info?.goods_info?.mainImage&&(e={image:P.value?.order_info?.goods_info?.mainImage,alt:"goods",goodName:P.value?.order_info?.goods_name,quantity:P.value?.order_info?.quantity,currency:P.value?.currency,amount:P.value?.actual_amount,shipping:P.value?.order_info?.logistics}),e}),k=e=>{if(!e)return"-";const a=new Date(e);return a.toLocaleDateString()+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},M=f(""),b=R(()=>B(P.value)),w=new q,Y=e=>{F.value=!0,w.getLogisticsByOrderId({orderId:e}).then(e=>{F.value=!1,0===e.code&&e.data?A.value=e.data:(console.error("获取物流信息失败:",e),A.value=null)}).catch(e=>{F.value=!1,console.error("获取物流信息失败:",e),A.value=null})};D(()=>P.value,e=>{!e||"yfh"!==b.value.type&&"yjs"!==b.value.type||Y(e.id)},{deep:!0});const H=()=>{v.push({name:"order-management"})};return N(()=>{const e=t.params.orderId;M.value=e,(()=>{let e={id:M.value};a.getOrderDetail(e).then(e=>{P.value=e.data,!P.value||"yfh"!==b.value.type&&"yjs"!==b.value.type||Y(P.value.id)})})()}),(e,a)=>{const t=h,v=$,_=T,y=O,I=C,f=x,R=U;return P.value?(l(),i("div",De,[r("div",Ne,[r("div",Oe,[n(v,{text:"",onClick:H,class:"back-btn"},{default:c(()=>[n(t,null,{default:c(()=>[n(m(V))]),_:1}),g(" "+o(m(s)("orderManagement.title"))+"#"+o(P.value.order_no),1)]),_:1})]),n(_,{type:b.value.status,size:"large"},{default:c(()=>[g(o(m(s)(b.value.label)),1)]),_:1},8,["type"])]),r("div",Te,[r("div",he,[r("h3",Pe,o(m(s)("orderManagement.order.products")),1),r("div",Ce,[r("div",Se,[r("img",{src:L.value.image,alt:L.value.alt,class:"product-image"},null,8,Ae),r("div",Fe,[r("span",Le,o(L.value.goodName),1),r("span",ke,"x"+o(L.value.quantity),1)]),r("div",Me,o(L.value.currency)+" "+o(Number(L.value.amount).toFixed(2)),1)])])]),r("div",be,[r("h3",we,o(m(s)("orderManagement.order.payment")),1),r("div",Ye,[r("p",null,[r("strong",null,o(m(s)("orderManagement.order.paymentMethod"))+":",1),g(" "+o(P.value.currency),1)]),r("p",null,[r("strong",null,o(m(s)("orderManagement.order.paymentStatus"))+":",1),g(" "+o(m(s)(b.value.label)),1)]),P.value.payment_time?(l(),i("p",Ve,[r("strong",null,o(m(s)("orderManagement.order.paidAt"))+":",1),g(" "+o(k(P.value.payment_time)),1)])):E("",!0)]),"zfgq"==b.value.type?(l(),i("div",$e,[n(t,null,{default:c(()=>[n(m(j))]),_:1}),r("span",null,o(m(s)("orderManagement.expiredNotice")),1)])):E("",!0)]),r("div",je,[r("h3",xe,o(m(s)("orderManagement.order.shipping")),1),r("p",Ue,[r("strong",null,o(m(s)("orderManagement.order.recipient"))+"：",1),g(" "+o(L.value.shipping?.firstName+L.value.shipping?.lastName||"-"),1)]),r("p",Be,[r("strong",null,o(m(s)("orderManagement.order.phone"))+"：",1),g(" "+o(L.value.shipping?.phone||"-"),1)]),r("p",Ge,[r("strong",null,o(m(s)("orderManagement.order.address"))+"：",1),g(" "+o(L.value.shipping?.countryLabel+L.value.shipping?.address1+L.value.shipping?.address2+L.value.shipping?.city||"-"),1)])])]),"yfh"===b.value.type||"yjs"===b.value.type?(l(),i("div",He,[A.value?(l(),i("div",Xe,[r("div",qe,[r("div",ze,[r("h3",null,o(e.$t("logistics.title")),1),r("span",Qe,o(e.$t("logistics.trackingNumber"))+": "+o(A.value.trackingNo),1)]),r("div",Je,[r("div",Ze,[r("div",Ke,[r("div",We,[n(t,null,{default:c(()=>[n(m(S))]),_:1}),r("span",null,o(e.$t("logistics.carrierInfo")),1)]),r("div",ea,[r("div",aa,[r("span",sa,o(e.$t("logistics.carrier"))+":",1),r("span",ta,o(A.value.logisticsCompany),1)]),r("div",ia,[r("span",la,o(e.$t("logistics.status"))+":",1),n(_,{type:4===A.value.logisticsStatus?"success":"info"},{default:c(()=>[g(o(A.value.logisticsStatusText),1)]),_:1},8,["type"])]),r("div",ra,[r("span",na,o(e.$t("logistics.trackingNumber"))+":",1),r("span",oa,o(A.value.trackingNo),1)])])])]),r("div",ca,[r("div",da,o(e.$t("logistics.timeline")),1),n(I,null,{default:c(()=>[(l(!0),i(d,null,u(A.value.traces.slice().reverse(),(e,a)=>(l(),p(y,{key:a,timestamp:e.time,type:0===a?"success":"primary"},{default:c(()=>[r("div",ua,[r("div",pa,o(e.description),1),e.location?(l(),i("div",ma,o(e.location),1)):E("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])])])])):F.value?(l(),i("div",va,[n(f,{rows:10,animated:""})])):(l(),i("div",ga,[n(R,{description:"暂无物流信息"})]))])):E("",!0),!P.value.timelineEvents||"paid"!==P.value.status&&"shipped"!==P.value.status&&"completed"!==P.value.status?E("",!0):(l(),i("div",Ea,[n(Re,{"order-id":P.value.id,"tracking-number":P.value.tracking?.number||"","timeline-events":P.value.timelineEvents,"logistics-info":P.value.logisticsInfo||{}},null,8,["order-id","tracking-number","timeline-events","logistics-info"])]))])):E("",!0)}}},[["__scopeId","data-v-8147e1d5"]]);export{_a as default};
