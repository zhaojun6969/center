import{az as s,r as e,j as a,U as o,z as t,B as l,P as c,u as i,D as r,Q as n,a5 as d,aA as u,A as g,E as v,O as p,L as h}from"./vendor-ClluBQmh.js";import{_ as m,l as k,e as w}from"./index-B4iIxVom.js";import{S as y}from"./index-7vXv9XNO.js";import"./elementPlus-5sGCOaHt.js";import"./utils-D5ZNaMwG.js";const f={class:"mobile-shop-container"},b={class:"mobile-header"},C={class:"mobile-title"},L={class:"mobile-carousel"},j=["onClick"],x={class:"carousel-image"},T=["src","alt"],z={class:"carousel-info"},M={class:"carousel-title"},B={class:"carousel-desc"},D={class:"carousel-price"},N={class:"carousel-dots"},I=["onClick"],$={class:"mobile-categories"},_={class:"category-header"},A={class:"category-title"},F=["onClick"],R={class:"products-scroll"},X=["onClick"],q={class:"product-image"},E=["src","alt"],G={key:0,class:"product-badge"},H={class:"product-info"},P={class:"product-name"},S={class:"product-desc"},U={class:"product-footer"},V={class:"product-price"},O=m({__name:"mobile",setup(m){const O=u(),{t:Q}=s(),J=k(),K=new y,W=e(0);let Y=null,Z=0,ss=0;const es=e([]),as=e([]),os=async(s,e)=>{try{const a=await K.getGoodsList({categoryId:s,pageSize:4,pageNum:1});console.log("Goods List Response for category",s,":",a),a&&a.success&&a.data&&a.data.rows&&(e.products=a.data.rows)}catch(a){console.error("Failed to fetch goods list:",a)}},ts=()=>{W.value=(W.value+1)%es.value.length},ls=s=>{Z=s.changedTouches[0].screenX,gs()},cs=s=>{ss=s.changedTouches[0].screenX},is=()=>{const s=Z-ss;Math.abs(s)>50&&(s>0?ts():W.value=(W.value-1+es.value.length)%es.value.length),us()},rs=s=>{O.push(`/shop/detail/${s}`)},ns=()=>{O.replace("/czhome")},ds=()=>{const s="zh"===J.lang?"en":"zh";J.switchLanguage(s)},us=()=>{Y=setInterval(()=>{ts()},5e3)},gs=()=>{Y&&(clearInterval(Y),Y=null)};return a(()=>{us(),(async()=>{try{const s=await K.getBannerList();console.log("Banner List Response:",s),s&&s.success&&s.data&&(es.value=s.data.map(s=>({id:s.id,linkTarget:s.linkTarget,title:s.bannerName,description:s.description,image:s.imageUrl,price:s.styleConfig?.price||""})))}catch(s){console.error("Failed to fetch banner list:",s)}})(),(async()=>{try{const s=await K.getCategoryList();if(console.log("Category List Response:",s),s&&s.success&&s.data){as.value=s.data;for(const s of as.value)await os(s.id,s)}}catch(s){console.error("Failed to fetch category list:",s)}})()}),o(()=>{gs()}),(s,e)=>(g(),t("div",f,[l("div",b,[l("button",{class:"back-btn",onClick:ns},[...e[0]||(e[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})],-1)])]),l("h1",C,c(i(Q)("shop.title")),1),l("button",{class:"language-toggle-btn",onClick:ds},c("zh"===i(J).lang?"EN":"中"),1)]),l("div",L,[l("div",{class:"carousel-track",style:r({transform:`translateX(-${100*W.value}%)`}),onTouchstart:ls,onTouchmove:cs,onTouchend:is},[(g(!0),t(n,null,d(es.value,(s,e)=>(g(),t("div",{key:e,class:"carousel-slide",onClick:e=>rs(s.linkTarget)},[l("div",x,[l("img",{src:s.image,alt:s.title},null,8,T)]),l("div",z,[l("h2",M,c(s.title),1),l("p",B,c(s.description),1),l("div",D,c(i(w).isDomesticDomain()?"¥":"$")+c(s.price),1)])],8,j))),128))],36),l("div",N,[(g(!0),t(n,null,d(es.value,(s,e)=>(g(),t("span",{key:e,class:v(["dot",{active:e===W.value}]),onClick:s=>(s=>{W.value=s})(e)},null,10,I))),128))])]),l("div",$,[(g(!0),t(n,null,d(as.value,s=>(g(),t("div",{key:s.id,class:"category-section"},[l("div",_,[l("h2",A,c(s.categoryName),1),l("button",{class:"view-all-btn",onClick:e=>{return a=s.id,void O.push(`/shop/good/${a}`);var a}},[p(c(i(Q)("shop.viewAll"))+" ",1),e[1]||(e[1]=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[l("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})],-1))],8,F)]),l("div",R,[(g(!0),t(n,null,d(s.products,s=>(g(),t("div",{key:s.id,class:"product-card",onClick:e=>rs(s.id)},[l("div",q,[l("img",{src:s.mainImage,alt:s.goodsName},null,8,E),s.tags.length>0?(g(),t("div",G,c(s.tags[0]),1)):h("",!0)]),l("div",H,[l("h3",P,c(s.goodsName),1),l("p",S,c(s.shortDesc),1),l("div",U,[l("span",V,c(i(w).isDomesticDomain()?"¥":"$")+c(s.price),1),e[2]||(e[2]=l("button",{class:"add-cart-btn"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[l("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M12 4.5v15m7.5-7.5h-15"})])],-1))])])],8,X))),128))])]))),128))])]))}},[["__scopeId","data-v-0edbff3d"]]);export{O as default};
