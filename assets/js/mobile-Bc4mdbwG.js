import{_ as e,e as a}from"./index-B4iIxVom.js";import{az as s,r as l,c as i,j as t,aB as o,w as c,z as r,B as n,L as u,R as d,P as v,u as p,J as m,E as g,Q as h,a5 as k,aA as b,A as y,I as f}from"./vendor-ClluBQmh.js";import{S as w}from"./ShareModal-CHiMKVK4.js";import{S as x}from"./index-7vXv9XNO.js";import{aE as D,aF as I}from"./elementPlus-5sGCOaHt.js";import"./utils-D5ZNaMwG.js";const C={class:"mobile-detail-container"},P={class:"mobile-header"},A={class:"mobile-title"},S={class:"product-gallery"},j=["src"],U=["src","alt"],M={class:"thumbnail-list"},_=["onClick"],B=["src","alt"],F={class:"product-info"},L={class:"product-category"},T={class:"product-name"},z={class:"product-price-section"},R={class:"current-price"},$={key:0,class:"original-price"},O={key:1,class:"discount-badge"},E={class:"product-description"},N={key:0,class:"product-specs"},q={class:"spec-label"},G={class:"spec-value"},H={class:"stock-status"},W={class:"product-tabs"},J={class:"tab-header"},Q=["onClick"],K={class:"tab-content"},V={key:0,class:"tab-panel"},X={class:"features-list"},Y={key:1,class:"tab-panel"},Z={class:"specs-list"},ee={class:"spec-label"},ae={class:"spec-value"},se={key:0,class:"product-rich-text"},le=["innerHTML"],ie={key:1,class:"related-products"},te={class:"products-scroll"},oe=["onClick"],ce={class:"product-image"},re=["src","alt"],ne={class:"product-info"},ue={class:"product-name"},de={class:"product-price"},ve={class:"bottom-action-bar"},pe=["disabled"],me=e({__name:"mobile",setup(e){const me=b(),ge=o(),{t:he}=s(),ke=new x,be=l(0),ye=l(null),fe=l("description"),we=l(!1),xe=l(null),De=e=>{Ce.value.videoUrl?be.value=0===e?-1:e-1:be.value=e},Ie=e=>{be.value=e,xe.value&&(Ce.value.videoUrl?xe.value.setActiveItem(-1===e?0:e+1):xe.value.setActiveItem(e))},Ce=l({id:1,name:"D1 标准版",category:"智能机器人",categoryId:1,price:"1,299",originalPrice:"1,599",discount:"-19%",inStock:!0,description:"D1标准版是一款基础AI交互功能的智能机器人，支持语音对话、情感识别和基础互动功能。",fullDescription:"D1标准版是Deotaland推出的入门级智能机器人，专为家庭陪伴和日常互动设计。它具备先进的AI语音识别系统，能够理解自然语言指令，并进行流畅的对话交流。内置的情感识别模块让它能够感知用户的情绪变化，做出相应的互动反馈。D1还支持多种表情显示，通过LED屏幕展现丰富的面部表情，让交流更加生动有趣。",images:["https://images.unsplash.com/photo-1535378437327-b71494663e01?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1563770095-39d468f95c83?w=800&h=800&fit=crop"],specs:{"尺寸":"15cm x 15cm x 20cm","重量":"1.2kg","材质":"ABS塑料 + 金属框架","电池":"5000mAh锂电池","续航":"8小时","充电":"USB-C快充","语音识别":"支持中文/英文","显示屏":"2.4英寸OLED","连接方式":"WiFi 6 / 蓝牙5.0"},features:["AI语音交互系统，支持自然语言对话","情感识别技术，感知用户情绪变化","多种表情显示，生动有趣的互动体验","WiFi/蓝牙双模连接，稳定可靠","超长续航，全天候陪伴","OTA在线升级，功能持续优化"]}),Pe=l([]),Ae=async e=>{try{const a=await ke.getGoodsDetail({id:e});if(console.log("Goods Detail Response:",a),a&&a.success&&a.data){const e=a.data;Ce.value={id:e.id,name:e.goodsName,category:e.categoryName,categoryId:e.categoryId,price:e.price?.toFixed(2)||"0",originalPrice:e.originalPrice?.toFixed(2)||"",discount:e.originalPrice?`-${Math.round(100*(1-e.price/e.originalPrice))}%`:"",inStock:e.stock>0,description:e.shortDesc||"",fullDescription:e.description||"",images:e.images&&e.images.length>0?e.images:[e.mainImage],specs:e.specs||{},features:Object.values(e.attributes||{}).map(e=>e),videoUrl:e.videoUrl||"",richText:e.extraInfo?.richText||""},be.value=e.videoUrl?-1:0,console.log("Product data updated:",Ce.value),e.videoUrl?setTimeout(()=>{ye.value&&ye.value.play().catch(e=>{console.log("Auto-play prevented:",e)}),xe.value&&xe.value.setActiveItem(0)},100):xe.value&&xe.value.setActiveItem(0),e.categoryId&&(async e=>{try{const a=await ke.getGoodsList({categoryId:e,pageSize:4});console.log("Related Products Response:",a),a&&a.success&&a.data&&a.data.rows&&(Pe.value=a.data.rows.map(e=>({id:e.id,name:e.goodsName,price:e.price?.toFixed(2)||"0",image:e.mainImage||e.images?.[0]||""})),console.log("Related products updated:",Pe.value))}catch(a){console.error("Failed to fetch related products:",a)}})(e.categoryId)}}catch(a){console.error("Failed to fetch goods detail:",a)}},Se=i(()=>[{id:"description",label:he("shop.detail.description")},{id:"specs",label:he("shop.detail.specifications")}]);i(()=>-1===be.value&&Ce.value.videoUrl?Ce.value.videoUrl:Ce.value.images[be.value]||"");const je=()=>{ye.value&&ye.value.play().catch(e=>{console.log("Auto-play prevented:",e)})},Ue=()=>{me.push(`/shop/buy/${Ce.value.id}`)},Me=()=>{me.push("/shop")},_e=()=>{we.value=!0},Be=()=>{we.value=!1};return t(()=>{const e=ge.params.id;e&&(console.log("Product ID:",e),Ae(e))}),c(()=>ge.params.id,e=>{e&&(console.log("Product ID changed:",e),Ae(e))}),(e,s)=>{const l=I,i=D;return y(),r("div",C,[n("div",P,[n("button",{class:"back-btn",onClick:Me},[...s[1]||(s[1]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1)])]),n("h1",A,v(p(he)("shop.detail.title")),1),n("button",{class:"share-btn",onClick:_e},[...s[2]||(s[2]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[n("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})],-1)])])]),n("div",S,[d(i,{ref_key:"carouselRef",ref:xe,autoplay:!1,interval:3e3,"indicator-position":"none",arrow:"always","initial-index":-1===be.value?0:be.value,onChange:De,class:"media-carousel"},{default:m(()=>[Ce.value.videoUrl?(y(),f(l,{key:0,class:"carousel-item"},{default:m(()=>[n("video",{ref_key:"videoPlayer",ref:ye,src:Ce.value.videoUrl,controls:"",class:"main-video",onLoadeddata:je}," 您的浏览器不支持视频播放 ",40,j)]),_:1})):u("",!0),(y(!0),r(h,null,k(Ce.value.images,(e,a)=>(y(),f(l,{key:a,class:"carousel-item"},{default:m(()=>[n("img",{src:e,alt:Ce.value.name,class:"main-image"},null,8,U)]),_:2},1024))),128))]),_:1},8,["initial-index"]),n("div",M,[Ce.value.videoUrl?(y(),r("div",{key:0,class:g(["thumbnail video-thumbnail",{active:-1===be.value}]),onClick:s[0]||(s[0]=e=>Ie(-1))},[...s[3]||(s[3]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[n("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M5.25 5.653c0-.856.917-1.398 2.097-1.398h2.018c1.18 0 2.097.542 2.097 1.398v1.5c0 1.18-.917 2.098-2.097 2.098h-2.018c-1.18 0-2.097-.918-2.097-2.098v-1.5zM6.75 12.5h10.5m-10.5 0v1.5h10.5v-1.5z"})],-1)])],2)):u("",!0),(y(!0),r(h,null,k(Ce.value.images,(e,a)=>(y(),r("div",{key:a,class:g(["thumbnail",{active:be.value===a}]),onClick:e=>Ie(a)},[n("img",{src:e,alt:Ce.value.name},null,8,B)],10,_))),128))])]),n("div",F,[n("div",L,v(Ce.value.category),1),n("h1",T,v(Ce.value.name),1),n("div",z,[n("span",R,v(p(a).isDomesticDomain()?"¥":"$")+v(Ce.value.price),1),Ce.value.originalPrice?(y(),r("span",$,v(p(a).isDomesticDomain()?"¥":"$")+v(Ce.value.originalPrice),1)):u("",!0),Ce.value.discount?(y(),r("span",O,v(Ce.value.discount),1)):u("",!0)]),n("div",E,[n("p",null,v(Ce.value.description),1)]),Object.keys(Ce.value.specs).length>0?(y(),r("div",N,[(y(!0),r(h,null,k(Ce.value.specs,(e,a)=>(y(),r("div",{class:"spec-item",key:a},[n("span",q,v(a),1),n("span",G,v(e),1)]))),128))])):u("",!0),n("div",H,[n("span",{class:g(["status-indicator",{inStock:Ce.value.inStock}])},null,2),n("span",null,v(Ce.value.inStock?p(he)("shop.detail.inStock"):p(he)("shop.detail.outOfStock")),1)])]),n("div",W,[n("div",J,[(y(!0),r(h,null,k(Se.value,e=>(y(),r("button",{key:e.id,class:g(["tab-btn",{active:fe.value===e.id}]),onClick:a=>fe.value=e.id},v(e.label),11,Q))),128))]),n("div",K,["description"===fe.value?(y(),r("div",V,[n("p",null,v(Ce.value.fullDescription),1),n("div",X,[(y(!0),r(h,null,k(Ce.value.features,(e,a)=>(y(),r("div",{key:a,class:"feature-item"},[s[4]||(s[4]=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[n("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M4.5 12.75l6 6 9-13.5"})],-1)),n("span",null,v(e),1)]))),128))])])):u("",!0),"specs"===fe.value?(y(),r("div",Y,[n("div",Z,[(y(!0),r(h,null,k(Ce.value.specs,(e,a)=>(y(),r("div",{class:"spec-row",key:a},[n("span",ee,v(a),1),n("span",ae,v(e),1)]))),128))])])):u("",!0)])]),Ce.value.richText?(y(),r("div",se,[n("div",{class:"rich-text-content",innerHTML:Ce.value.richText},null,8,le)])):u("",!0),Pe.value.length>0?(y(),r("div",ie,[n("h2",null,v(p(he)("shop.detail.relatedProducts")),1),n("div",te,[(y(!0),r(h,null,k(Pe.value,e=>(y(),r("div",{key:e.id,class:"product-card",onClick:a=>{return s=e.id,void me.push(`/shop/detail/${s}`);var s}},[n("div",ce,[n("img",{src:e.image,alt:e.name},null,8,re)]),n("div",ne,[n("h3",ue,v(e.name),1),n("span",de,v(p(a).isDomesticDomain()?"¥":"$")+v(e.price),1)])],8,oe))),128))])])):u("",!0),n("div",ve,[n("button",{class:"btn-buy",onClick:Ue,disabled:!Ce.value.inStock},v(p(he)("shop.buyNow")),9,pe)]),d(w,{visible:we.value,"product-name":Ce.value.name,"product-image":Ce.value.images[0],onClose:Be},null,8,["visible","product-name","product-image"])])}}},[["__scopeId","data-v-fcaee398"]]);export{me as default};
