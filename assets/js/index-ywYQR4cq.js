import{az as e,r as a,c as s,j as l,aB as i,w as t,z as o,B as c,L as r,R as n,P as d,u,E as p,Q as v,a5 as m,O as h,aA as g,A as k}from"./vendor-ClluBQmh.js";import{S as b}from"./ShareModal-CHiMKVK4.js";import{S as y}from"./index-7vXv9XNO.js";import{_ as w,e as f}from"./index-B4iIxVom.js";import"./elementPlus-5sGCOaHt.js";import"./utils-D5ZNaMwG.js";const x={class:"detail-container"},D={class:"breadcrumb"},C={class:"breadcrumb-item active"},I={class:"product-detail"},P={class:"product-gallery"},j={class:"main-media"},S=["src"],A=["src","alt"],M={class:"thumbnail-list"},U=["onClick"],B=["src","alt"],T={class:"product-info"},z={class:"product-name"},F={class:"product-category"},L={class:"product-price-section"},$={class:"current-price"},_={key:0,class:"original-price"},q={key:1,class:"discount-badge"},O={class:"product-description"},R={class:"product-specs"},N={class:"spec-label"},E={class:"spec-value"},G={class:"product-actions"},H={class:"stock-status"},W={class:"product-tabs"},Q={class:"tab-header"},J=["onClick"],K={class:"tab-content"},V={key:0,class:"tab-panel"},X={class:"features-list"},Y={key:1,class:"tab-panel"},Z={class:"specs-table"},ee={class:"spec-label"},ae={class:"spec-value"},se={key:0,class:"product-rich-text"},le=["innerHTML"],ie={class:"related-products"},te={class:"products-grid"},oe=["onClick"],ce={class:"product-image"},re=["src","alt"],ne={class:"product-info"},de={class:"product-name"},ue={class:"product-price"},pe=w({__name:"index",setup(w){const pe=g(),ve=i(),{t:me}=e(),he=new y,ge=a(0),ke=a(null),be=a("description"),ye=a(!1),we=a({id:1,name:"D1 标准版",category:"智能机器人",categoryId:1,price:"1,299",originalPrice:"1,599",discount:"-19%",inStock:!0,description:"D1标准版是一款基础AI交互功能的智能机器人，支持语音对话、情感识别和基础互动功能。",fullDescription:"D1标准版是Deotaland推出的入门级智能机器人，专为家庭陪伴和日常互动设计。它具备先进的AI语音识别系统，能够理解自然语言指令，并进行流畅的对话交流。内置的情感识别模块让它能够感知用户的情绪变化，做出相应的互动反馈。D1还支持多种表情显示，通过LED屏幕展现丰富的面部表情，让交流更加生动有趣。",images:["https://images.unsplash.com/photo-1535378437327-b71494663e01?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=800&fit=crop","https://images.unsplash.com/photo-1563770095-39d468f95c83?w=800&h=800&fit=crop"],specs:{"尺寸":"15cm x 15cm x 20cm","重量":"1.2kg","材质":"ABS塑料 + 金属框架","电池":"5000mAh锂电池","续航":"8小时","充电":"USB-C快充","语音识别":"支持中文/英文","显示屏":"2.4英寸OLED","连接方式":"WiFi 6 / 蓝牙5.0"},features:["AI语音交互系统，支持自然语言对话","情感识别技术，感知用户情绪变化","多种表情显示，生动有趣的互动体验","WiFi/蓝牙双模连接，稳定可靠","超长续航，全天候陪伴","OTA在线升级，功能持续优化"]}),fe=a([]),xe=async e=>{try{const a=await he.getGoodsDetail({id:e});if(console.log("Goods Detail Response:",a),a&&a.success&&a.data){const e=a.data;we.value={id:e.id,name:e.goodsName,category:e.categoryName,categoryId:e.categoryId,price:e.price?.toFixed(2)||"0",originalPrice:e.originalPrice?.toFixed(2)||"",discount:e.originalPrice?`-${Math.round(100*(1-e.price/e.originalPrice))}%`:"",inStock:e.stock>0,description:e.shortDesc||"",fullDescription:e.description||"",images:e.images&&e.images.length>0?e.images:[e.mainImage],specs:e.specs||{},features:Object.values(e.attributes||{}).map(e=>e),videoUrl:e.videoUrl||"",richText:e.extraInfo?.richText||""},ge.value=e.videoUrl?-1:0,console.log("Product data updated:",we.value),e.videoUrl&&setTimeout(()=>{ke.value&&ke.value.play().catch(e=>{console.log("Auto-play prevented:",e)})},100),e.categoryId&&(async e=>{try{const a=await he.getGoodsList({categoryId:e,pageSize:4});console.log("Related Products Response:",a),a&&a.success&&a.data&&a.data.rows&&(fe.value=a.data.rows.map(e=>({id:e.id,name:e.goodsName,price:e.price?.toFixed(2)||"0",image:e.mainImage||e.images?.[0]||""})),console.log("Related products updated:",fe.value))}catch(a){console.error("Failed to fetch related products:",a)}})(e.categoryId)}}catch(a){console.error("Failed to fetch goods detail:",a)}},De=s(()=>[{id:"description",label:me("shop.detail.description")},{id:"specs",label:me("shop.detail.specifications")}]),Ce=s(()=>-1===ge.value&&we.value.videoUrl?we.value.videoUrl:we.value.images[ge.value]||""),Ie=()=>{ke.value&&ke.value.play().catch(e=>{console.log("Auto-play prevented:",e)})},Pe=()=>{pe.push(`/shop/buy/${we.value.id}`)},je=()=>{pe.push("/shop")},Se=()=>{pe.push(`/shop/good/${we.value.categoryId||1}`)},Ae=()=>{ye.value=!0},Me=()=>{ye.value=!1};return l(()=>{const e=ve.params.id;e&&(console.log("Product ID:",e),xe(e))}),t(()=>ve.params.id,e=>{e&&(console.log("Product ID changed:",e),xe(e))}),(e,a)=>(k(),o("div",x,[c("div",D,[c("span",{class:"breadcrumb-item",onClick:je},d(u(me)("shop.title")),1),a[1]||(a[1]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)),c("span",{class:"breadcrumb-item",onClick:Se},d(we.value.category),1),a[2]||(a[2]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)),c("span",C,d(we.value.name),1)]),c("div",I,[c("div",P,[c("div",j,[we.value.videoUrl&&-1===ge.value?(k(),o("video",{key:0,ref_key:"videoPlayer",ref:ke,src:we.value.videoUrl,controls:"",autoplay:"",muted:"",class:"main-video",onLoadeddata:Ie}," 您的浏览器不支持视频播放 ",40,S)):(k(),o("img",{key:1,src:Ce.value,alt:we.value.name,class:"main-image"},null,8,A))]),c("div",M,[we.value.videoUrl?(k(),o("div",{key:0,class:p(["thumbnail video-thumbnail",{active:-1===ge.value}]),onClick:a[0]||(a[0]=e=>ge.value=-1)},[a[3]||(a[3]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M5.25 5.653c0-.856.917-1.398 2.097-1.398h2.018c1.18 0 2.097.542 2.097 1.398v1.5c0 1.18-.917 2.098-2.097 2.098h-2.018c-1.18 0-2.097-.918-2.097-2.098v-1.5zM6.75 12.5h10.5m-10.5 0v1.5h10.5v-1.5z"})],-1)),c("span",null,d(u(me)("shop.detail.video")),1)],2)):r("",!0),(k(!0),o(v,null,m(we.value.images,(e,a)=>(k(),o("div",{key:a,class:p(["thumbnail",{active:ge.value===a}]),onClick:e=>ge.value=a},[c("img",{src:e,alt:we.value.name},null,8,B)],10,U))),128))])]),c("div",T,[c("h1",z,d(we.value.name),1),c("p",F,d(we.value.category),1),c("div",L,[c("span",$,d(u(f).isDomesticDomain()?"¥":"$")+d(we.value.price),1),we.value.originalPrice?(k(),o("span",_,d(u(f).isDomesticDomain()?"¥":"$")+d(we.value.originalPrice),1)):r("",!0),we.value.discount?(k(),o("span",q,d(we.value.discount),1)):r("",!0)]),c("div",O,[c("h3",null,d(u(me)("shop.detail.description")),1),c("p",null,d(we.value.description),1)]),c("div",R,[c("h3",null,d(u(me)("shop.detail.specifications")),1),(k(!0),o(v,null,m(we.value.specs,(e,a)=>(k(),o("div",{class:"spec-item",key:a},[c("span",N,d(a)+":",1),c("span",E,d(e),1)]))),128))]),c("div",G,[c("button",{class:"btn btn-buy",onClick:Pe},d(u(me)("shop.buyNow")),1),c("button",{class:"btn btn-share",onClick:Ae},[a[4]||(a[4]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})],-1)),h(" "+d(u(me)("shop.share.button")),1)])]),c("div",H,[c("span",{class:p(["status-indicator",{inStock:we.value.inStock}])},null,2),c("span",null,d(we.value.inStock?u(me)("shop.detail.inStock"):u(me)("shop.detail.outOfStock")),1)])])]),c("div",W,[c("div",Q,[(k(!0),o(v,null,m(De.value,e=>(k(),o("button",{key:e.id,class:p(["tab-btn",{active:be.value===e.id}]),onClick:a=>be.value=e.id},d(e.label),11,J))),128))]),c("div",K,["description"===be.value?(k(),o("div",V,[c("h3",null,d(u(me)("shop.detail.description")),1),c("p",null,d(we.value.fullDescription),1),c("div",X,[(k(!0),o(v,null,m(we.value.features,(e,s)=>(k(),o("div",{key:s,class:"feature-item"},[a[5]||(a[5]=c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[c("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M4.5 12.75l6 6 9-13.5"})],-1)),c("span",null,d(e),1)]))),128))])])):r("",!0),"specs"===be.value?(k(),o("div",Y,[c("h3",null,d(u(me)("shop.detail.specifications")),1),c("table",Z,[(k(!0),o(v,null,m(we.value.specs,(e,a)=>(k(),o("tr",{key:a},[c("td",ee,d(a),1),c("td",ae,d(e),1)]))),128))])])):r("",!0)])]),we.value.richText?(k(),o("div",se,[c("div",{class:"rich-text-content",innerHTML:we.value.richText},null,8,le)])):r("",!0),c("div",ie,[c("h2",null,d(u(me)("shop.detail.relatedProducts")),1),c("div",te,[(k(!0),o(v,null,m(fe.value,e=>(k(),o("div",{key:e.id,class:"product-card",onClick:a=>{return s=e.id,void pe.push(`/shop/detail/${s}`);var s}},[c("div",ce,[c("img",{src:e.image,alt:e.name},null,8,re)]),c("div",ne,[c("h3",de,d(e.name),1),c("span",ue,d(u(f).isDomesticDomain()?"¥":"$")+d(e.price),1)])],8,oe))),128))])]),n(b,{visible:ye.value,"product-name":we.value.name,"product-image":we.value.images[0],onClose:Me},null,8,["visible","product-name","product-image"])]))}},[["__scopeId","data-v-ae256578"]]);export{pe as default};
