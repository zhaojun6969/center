import{az as e,r as s,c as a,f as l,aB as o,z as t,B as i,L as n,P as d,u,Q as r,a5 as c,O as p,K as v,ai as m,ad as h,W as y,aA as b,A as k,E as w}from"./vendor-C2S3nqiJ.js";import{_ as f}from"./index-7JqqWDD-.js";import"./elementPlus-Dhv4F-aG.js";import"./utils-uaInoSqn.js";const g={class:"buy-container"},x={class:"breadcrumb"},C={class:"breadcrumb-item"},A={class:"buy-layout"},q={class:"left-section"},D={class:"section-card"},j={class:"section-title"},M={class:"product-item"},V={class:"product-image"},B=["src","alt"],L={class:"product-details"},U={class:"product-name"},H={class:"product-desc"},I={class:"product-price"},_={class:"quantity-section"},z={class:"quantity-selector"},O={class:"qty-value"},$={class:"section-card"},P={class:"section-title"},E={key:0,class:"no-coupon"},F={key:1,class:"coupon-list"},S=["onClick"],K={class:"coupon-left"},Q={class:"coupon-amount"},W={class:"coupon-condition"},G={class:"coupon-right"},J={class:"coupon-name"},N={class:"coupon-expiry"},R={key:0,class:"coupon-check"},T={class:"section-card"},X={class:"section-title"},Y={class:"address-list"},Z=["onClick"],ee={class:"address-content"},se={class:"address-header"},ae={class:"address-name"},le={class:"address-phone"},oe={key:0,class:"address-default"},te={class:"address-detail"},ie={class:"address-actions"},ne=["onClick"],de=["onClick"],ue={class:"right-section"},re={class:"order-summary"},ce={class:"summary-title"},pe={class:"summary-row"},ve={class:"summary-label"},me={class:"summary-value"},he={class:"summary-row"},ye={class:"summary-label"},be={class:"summary-value"},ke={key:0,class:"summary-row"},we={class:"summary-label"},fe={class:"summary-value discount"},ge={class:"summary-row"},xe={class:"summary-label"},Ce={class:"summary-value"},Ae={class:"summary-row total"},qe={class:"summary-label"},De={class:"summary-value"},je={class:"modal-title"},Me={class:"form-group"},Ve=["placeholder"],Be={class:"form-group"},Le=["placeholder"],Ue={class:"form-group"},He=["placeholder"],Ie={class:"form-group"},_e=["placeholder"],ze={class:"form-group"},Oe=["placeholder"],$e={class:"form-group"},Pe=["placeholder"],Ee={class:"form-group checkbox"},Fe={class:"modal-actions"},Se=f({__name:"index",setup(f){const Se=b(),Ke=o(),{t:Qe}=e(),We=s(1),Ge=s(null),Je=s(null),Ne=s(!1),Re=s(null),Te=s({id:1,name:"D1 标准版",description:"基础AI交互功能",image:"https://images.unsplash.com/photo-1535378437327-b71494663e01?w=400&h=400&fit=crop",price:1299}),Xe=s([{id:1,name:"新用户优惠券",display:"¥100",condition:"满¥1000可用",expiry:"2025-12-31",applicable:!0,amount:100,minAmount:1e3},{id:2,name:"满减优惠券",display:"¥200",condition:"满¥2000可用",expiry:"2025-12-31",applicable:!1,amount:200,minAmount:2e3},{id:3,name:"折扣优惠券",display:"9折",condition:"满¥500可用",expiry:"2025-12-31",applicable:!0,discount:.9,minAmount:500}]),Ye=s([{id:1,name:"张三",phone:"138****8888",province:"北京市",city:"北京市",district:"朝阳区",detail:"建国路88号",isDefault:!0},{id:2,name:"李四",phone:"139****9999",province:"上海市",city:"上海市",district:"浦东新区",detail:"世纪大道100号",isDefault:!1}]),Ze=s({name:"",phone:"",province:"",city:"",district:"",detail:"",isDefault:!1}),es=a(()=>`¥${(Te.value.price*We.value).toLocaleString()}`),ss=a(()=>{if(!Ge.value)return"¥0";const e=Xe.value.find(e=>e.id===Ge.value);if(!e)return"¥0";const s=Te.value.price*We.value;if(e.amount)return`¥${e.amount}`;if(e.discount){return`¥${(s*(1-e.discount)).toFixed(0)}`}return"¥0"}),as=a(()=>"¥0"),ls=a(()=>{const e=Te.value.price*We.value;let s=0;if(Ge.value){const a=Xe.value.find(e=>e.id===Ge.value);a&&(a.amount?s=a.amount:a.discount&&(s=e*(1-a.discount)))}return`¥${Math.max(0,e-s).toLocaleString()}`}),os=()=>{We.value<99&&We.value++},ts=()=>{We.value>1&&We.value--},is=()=>{if(Re.value){const e=Ye.value.findIndex(e=>e.id===Re.value);-1!==e&&(Ye.value[e]={...Ze.value,id:Re.value})}else{const e=Math.max(...Ye.value.map(e=>e.id))+1;Ye.value.push({...Ze.value,id:e})}Ze.value.isDefault&&Ye.value.forEach(e=>e.isDefault=e.id===(Re.value||Ye.value[Ye.value.length-1].id)),Ne.value=!1,Re.value=null,Ze.value={name:"",phone:"",province:"",city:"",district:"",detail:"",isDefault:!1}},ns=()=>{Se.push("/shop")},ds=()=>{Je.value?alert(Qe("shop.buy.confirmOrder")):alert(Qe("shop.buy.selectAddress"))};return l(()=>{const e=Ke.params.id;e&&console.log("Product ID:",e);const s=Ye.value.find(e=>e.isDefault);s&&(Je.value=s.id)}),(e,s)=>(k(),t("div",g,[i("div",x,[i("span",{class:"breadcrumb-item",onClick:ns},d(u(Qe)("shop.title")),1),s[11]||(s[11]=i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)),i("span",C,d(u(Qe)("shop.buy.title")),1)]),i("div",A,[i("div",q,[i("div",D,[i("h2",j,d(u(Qe)("shop.buy.productInfo")),1),i("div",M,[i("div",V,[i("img",{src:Te.value.image,alt:Te.value.name},null,8,B)]),i("div",L,[i("h3",U,d(Te.value.name),1),i("p",H,d(Te.value.description),1),i("div",I,d(Te.value.price),1)])]),i("div",_,[i("label",null,d(u(Qe)("shop.buy.quantity")),1),i("div",z,[i("button",{class:"qty-btn",onClick:ts},[...s[12]||(s[12]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M19.5 12h-15"})],-1)])]),i("span",O,d(We.value),1),i("button",{class:"qty-btn",onClick:os},[...s[13]||(s[13]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])])])])]),i("div",$,[i("h2",P,d(u(Qe)("shop.buy.selectCoupon")),1),0===Xe.value.length?(k(),t("div",E,[s[14]||(s[14]=i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25h-2.25m-7.5-10.5H6.375a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125z"})],-1)),i("p",null,d(u(Qe)("shop.buy.noCoupon")),1)])):(k(),t("div",F,[(k(!0),t(r,null,c(Xe.value,e=>(k(),t("div",{key:e.id,class:w(["coupon-item",{selected:Ge.value===e.id,disabled:!e.applicable}]),onClick:s=>(e=>{e.applicable&&(Ge.value=e.id===Ge.value?null:e.id)})(e)},[i("div",K,[i("div",Q,d(e.display),1),i("div",W,d(e.condition),1)]),i("div",G,[i("div",J,d(e.name),1),i("div",N,d(e.expiry),1)]),Ge.value===e.id?(k(),t("div",R,[...s[15]||(s[15]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M4.5 12.75l6 6 9-13.5"})],-1)])])):n("",!0)],10,S))),128))]))]),i("div",T,[i("h2",X,d(u(Qe)("shop.buy.shippingAddress")),1),i("div",Y,[(k(!0),t(r,null,c(Ye.value,e=>(k(),t("div",{key:e.id,class:w(["address-item",{selected:Je.value===e.id}]),onClick:s=>{return a=e.id,void(Je.value=a);var a}},[i("div",ee,[i("div",se,[i("span",ae,d(e.name),1),i("span",le,d(e.phone),1),e.isDefault?(k(),t("span",oe,d(u(Qe)("shop.address.default")),1)):n("",!0)]),i("p",te,d(e.province)+" "+d(e.city)+" "+d(e.district)+" "+d(e.detail),1)]),i("div",ie,[i("button",{class:"action-btn edit",onClick:y(s=>(e=>{Re.value=e.id,Ze.value={...e},Ne.value=!0})(e),["stop"])},[...s[16]||(s[16]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1)])],8,ne),i("button",{class:"action-btn delete",onClick:y(s=>{return a=e.id,void(confirm(Qe("shop.buy.deleteAddress"))&&(Ye.value=Ye.value.filter(e=>e.id!==a),Je.value===a&&(Je.value=Ye.value[0]?.id||null)));var a},["stop"])},[...s[17]||(s[17]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,de)])],10,Z))),128))]),i("button",{class:"add-address-btn",onClick:s[0]||(s[0]=e=>Ne.value=!0)},[s[18]||(s[18]=i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[i("path",{"stroke-linecap":"square","stroke-linejoin":"miter",d:"M12 4.5v15m7.5-7.5h-15"})],-1)),p(" "+d(u(Qe)("shop.buy.addAddress")),1)])])]),i("div",ue,[i("div",re,[i("h2",ce,d(u(Qe)("shop.buy.confirmOrder")),1),i("div",pe,[i("span",ve,d(u(Qe)("shop.buy.productInfo")),1),i("span",me,d(Te.value.name)+" x "+d(We.value),1)]),i("div",he,[i("span",ye,d(u(Qe)("shop.buy.subtotal")),1),i("span",be,d(es.value),1)]),Ge.value?(k(),t("div",ke,[i("span",we,d(u(Qe)("shop.buy.discount")),1),i("span",fe,"-"+d(ss.value),1)])):n("",!0),i("div",ge,[i("span",xe,d(u(Qe)("shop.buy.shippingFee")),1),i("span",Ce,d(as.value),1)]),s[19]||(s[19]=i("div",{class:"summary-divider"},null,-1)),i("div",Ae,[i("span",qe,d(u(Qe)("shop.buy.total")),1),i("span",De,d(ls.value),1)]),i("button",{class:"submit-btn",onClick:ds},d(u(Qe)("shop.buy.submitOrder")),1)])])]),Ne.value?(k(),t("div",{key:0,class:"modal-overlay",onClick:s[10]||(s[10]=e=>Ne.value=!1)},[i("div",{class:"modal-content",onClick:s[9]||(s[9]=y(()=>{},["stop"]))},[i("h2",je,d(Re.value?u(Qe)("shop.buy.editAddress"):u(Qe)("shop.buy.addAddress")),1),i("div",Me,[i("label",null,d(u(Qe)("shop.address.name")),1),v(i("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>Ze.value.name=e),type:"text",placeholder:u(Qe)("shop.address.name")},null,8,Ve),[[m,Ze.value.name]])]),i("div",Be,[i("label",null,d(u(Qe)("shop.address.phone")),1),v(i("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>Ze.value.phone=e),type:"tel",placeholder:u(Qe)("shop.address.phone")},null,8,Le),[[m,Ze.value.phone]])]),i("div",Ue,[i("label",null,d(u(Qe)("shop.address.province")),1),v(i("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>Ze.value.province=e),type:"text",placeholder:u(Qe)("shop.address.province")},null,8,He),[[m,Ze.value.province]])]),i("div",Ie,[i("label",null,d(u(Qe)("shop.address.city")),1),v(i("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>Ze.value.city=e),type:"text",placeholder:u(Qe)("shop.address.city")},null,8,_e),[[m,Ze.value.city]])]),i("div",ze,[i("label",null,d(u(Qe)("shop.address.district")),1),v(i("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>Ze.value.district=e),type:"text",placeholder:u(Qe)("shop.address.district")},null,8,Oe),[[m,Ze.value.district]])]),i("div",$e,[i("label",null,d(u(Qe)("shop.address.detail")),1),v(i("textarea",{"onUpdate:modelValue":s[6]||(s[6]=e=>Ze.value.detail=e),placeholder:u(Qe)("shop.address.detail"),rows:"3"},null,8,Pe),[[m,Ze.value.detail]])]),i("div",Ee,[i("label",null,[v(i("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>Ze.value.isDefault=e),type:"checkbox"},null,512),[[h,Ze.value.isDefault]]),p(" "+d(u(Qe)("shop.address.setDefault")),1)])]),i("div",Fe,[i("button",{class:"modal-btn cancel",onClick:s[8]||(s[8]=e=>Ne.value=!1)},d(u(Qe)("shop.address.cancel")),1),i("button",{class:"modal-btn save",onClick:is},d(u(Qe)("shop.address.save")),1)])])])):n("",!0)]))}},[["__scopeId","data-v-61bc0574"]]);export{Se as default};
