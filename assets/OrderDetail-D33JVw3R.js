import{r as e,b as a,i as s,_ as t}from"./index-DlA8SRM3.js";/* empty css                 *//* empty css                    *//* empty css                         */import{z as i,A as l,B as r,R as n,P as o,J as c,Q as d,a5 as u,I as p,u as m,E as v,O as E,L as g,ax as _,aB as I,aA as y,r as R,c as f,j as D,f as N}from"./vendor-p2oL7ibe.js";import{a2 as O,$ as T,E as C,u as P,a3 as S,Y as h,a4 as A,_ as L,X as F,o as k,a5 as M,a6 as b,a7 as w,Z as Y,N as x,x as V,W as $,a8 as j,a9 as U}from"./elementPlus-BlcbFMqO.js";import{g as B,O as G}from"./OrderManagement-KCJvz3DG.js";/* empty css                                                                          */import{d as X}from"./date-CgH6eVIF.js";var H={};class z{RULE=(()=>"undefined"!=typeof window?"client":"undefined"!=typeof process?H.VITE_PROJECTTYPE:void 0)();ship(s){let t={orderId:s.orderId,orderNo:s.orderNo,trackingNo:s.trackingNo,logisticsCompanyCode:s.logisticsCompanyCode,logisticsCompany:s.logisticsCompany,customerName:s.customerName,remark:s.remark};return e.common(a.sh_ship,t)}getLogisticsByOrderId(t){const i="client"===this.RULE?s.wl_get_by_order:a.wl_get_by_order,l={url:i.url.replace("ORDER_ID",t.orderId),method:i.method,isLoading:i.isLoading};return e.common(l,{})}refreshLogisticsByOrderId(t){t.orderId;const i="client"===this.RULE?s.wl_refresh:a.wl_refresh,l={url:i.url.replace("ORDER_ID",t.orderId),method:i.method,isLoading:i.isLoading};return e.common(l,{})}}const q={class:"logistics-timeline"},J={class:"timeline-header"},K={class:"tracking-number"},Q={class:"event-header"},W={class:"event-title"},Z={class:"event-content"},ee={class:"event-description"},ae={key:0,class:"event-operator"},se={class:"logistics-info"},te={class:"info-card"},ie={class:"card-header"},le={class:"card-content"},re={class:"info-row"},ne={class:"label"},oe={class:"value"},ce={class:"info-row"},de={class:"label"},ue={class:"value"},pe={class:"info-row"},me={class:"label"},ve={class:"value"},Ee={class:"info-card"},ge={class:"card-header"},_e={class:"card-content"},Ie={class:"location-info"},ye={class:"current-address"},Re={class:"status-update"},fe=t({__name:"LogisticsTimeline",props:{orderId:{type:String,required:!0},trackingNumber:{type:String,default:""},timelineEvents:{type:Array,default:()=>[]},logisticsInfo:{type:Object,default:()=>({})}},emits:["refresh"],setup(e,{emit:a}){const s={ORDER_CREATED:"order_created",PAYMENT_CONFIRMED:"payment_confirmed",PROCESSING:"processing",SHIPPED:"shipped",IN_TRANSIT:"in_transit",OUT_FOR_DELIVERY:"out_for_delivery",EXCEPTION:"exception"},t=e=>({[s.ORDER_CREATED]:Y,[s.PAYMENT_CONFIRMED]:F,[s.PROCESSING]:w,[s.SHIPPED]:b,[s.IN_TRANSIT]:h,[s.OUT_FOR_DELIVERY]:M,[s.DELIVERED]:k,[s.EXCEPTION]:F}[e]||F),_=e=>({[s.DELIVERED]:"success",[s.EXCEPTION]:"danger",[s.SHIPPED]:"primary",[s.PROCESSING]:"warning"}[e]||"info"),I=e=>({[s.ORDER_CREATED]:"订单已创建",[s.PAYMENT_CONFIRMED]:"支付确认",[s.PROCESSING]:"订单处理中",[s.SHIPPED]:"已发货",[s.IN_TRANSIT]:"运输中",[s.OUT_FOR_DELIVERY]:"派送中",[s.DELIVERED]:"已送达",[s.EXCEPTION]:"异常状态"}[e]||"未知状态"),y=e=>({[s.ORDER_CREATED]:"已完成",[s.PAYMENT_CONFIRMED]:"已完成",[s.PROCESSING]:"进行中",[s.SHIPPED]:"已完成",[s.IN_TRANSIT]:"进行中",[s.OUT_FOR_DELIVERY]:"进行中",[s.DELIVERED]:"已完成",[s.EXCEPTION]:"需处理"}[e]||"未知"),R=e=>({[s.ORDER_CREATED]:"completed",[s.PAYMENT_CONFIRMED]:"completed",[s.PROCESSING]:"processing",[s.SHIPPED]:"completed",[s.IN_TRANSIT]:"processing",[s.OUT_FOR_DELIVERY]:"processing",[s.DELIVERED]:"completed",[s.EXCEPTION]:"pending"}[e]||"pending"),f=e=>({[s.ORDER_CREATED]:"info",[s.PAYMENT_CONFIRMED]:"success",[s.PROCESSING]:"warning",[s.SHIPPED]:"primary",[s.IN_TRANSIT]:"warning",[s.OUT_FOR_DELIVERY]:"warning",[s.DELIVERED]:"success",[s.EXCEPTION]:"danger"}[e]||"info");return(a,D)=>{const N=T,F=C,k=O,M=S;return l(),i("div",q,[r("div",J,[r("h3",null,o(a.$t("logistics.title")),1),r("span",K,o(a.$t("logistics.trackingNumber"))+": "+o(e.trackingNumber),1)]),n(M,null,{default:c(()=>[(l(!0),i(d,null,u(e.timelineEvents,(e,a)=>{return l(),p(k,{key:a,timestamp:m(X).formatDate(e.timestamp),color:(d=e.type,document.documentElement.classList.contains("dark")?{[s.ORDER_CREATED]:"#9CA3AF",[s.PAYMENT_CONFIRMED]:"#60A5FA",[s.PROCESSING]:"#FBBF24",[s.SHIPPED]:"#A78BFA",[s.IN_TRANSIT]:"#34D399",[s.OUT_FOR_DELIVERY]:"#FB923C",[s.DELIVERED]:"#4ADE80",[s.EXCEPTION]:"#F87171"}[d]||"#9CA3AF":{[s.ORDER_CREATED]:"#909399",[s.PAYMENT_CONFIRMED]:"#409EFF",[s.PROCESSING]:"#E6A23C",[s.SHIPPED]:"#8B5CF6",[s.IN_TRANSIT]:"#00BFA6",[s.OUT_FOR_DELIVERY]:"#FF9800",[s.DELIVERED]:"#4CAF50",[s.EXCEPTION]:"#F44336"}[d]||"#909399"),icon:t(e.type),type:_(e.type),size:0===a?"large":"normal",placement:"top"},{default:c(()=>[r("div",{class:v(["timeline-event",R(e.type)])},[r("div",Q,[r("span",W,o(I(e.type)),1),n(N,{type:f(e.type),size:"small"},{default:c(()=>[E(o(y(e.type)),1)]),_:2},1032,["type"])]),r("div",Z,[r("p",ee,o(e.description),1),e.operator?(l(),i("div",ae,[n(F,null,{default:c(()=>[n(m(P))]),_:1}),r("span",null,o(e.operator),1)])):g("",!0)])],2)]),_:2},1032,["timestamp","color","icon","type","size"]);var d}),128))]),_:1}),r("div",se,[r("div",te,[r("div",ie,[n(F,null,{default:c(()=>[n(m(h))]),_:1}),r("span",null,o(a.$t("logistics.carrierInfo")),1)]),r("div",le,[r("div",re,[r("span",ne,o(a.$t("logistics.carrier"))+":",1),r("span",oe,o(e.logisticsInfo.carrier||"顺丰速运"),1)]),r("div",ce,[r("span",de,o(a.$t("logistics.service"))+":",1),r("span",ue,o(e.logisticsInfo.service||"标准快递"),1)]),r("div",pe,[r("span",me,o(a.$t("logistics.estimatedDelivery"))+":",1),r("span",ve,o(m(X).formatDate(e.logisticsInfo.estimatedDelivery)),1)])])]),r("div",Ee,[r("div",ge,[n(F,null,{default:c(()=>[n(m(A))]),_:1}),r("span",null,o(a.$t("logistics.currentLocation")),1)]),r("div",_e,[r("div",Ie,[r("p",ye,o(e.logisticsInfo.currentLocation||"北京市朝阳区分拣中心"),1),r("div",Re,[n(F,null,{default:c(()=>[n(m(L))]),_:1}),r("span",null,o(a.$t("logistics.lastUpdate"))+": "+o(m(X).formatDate(e.logisticsInfo.lastUpdate)),1)])])])])])])}}},[["__scopeId","data-v-ac75861b"]]),De={key:0,class:"order-detail"},Ne={class:"detail-header"},Oe={class:"header-left"},Te={class:"detail-grid"},Ce={class:"detail-card"},Pe={class:"card-title"},Se={class:"products-list"},he={class:"product-item"},Ae=["src","alt"],Le={class:"product-info"},Fe={class:"name"},ke={style:{"margin-top":"10px"},class:"qty"},Me={class:"price"},be={class:"detail-card"},we={class:"card-title"},Ye={class:"payment-info"},xe={key:0},Ve={key:0,class:"expired-notice",style:{"margin-top":"10px"}},$e={class:"detail-card"},je={class:"card-title"},Ue={style:{"margin-top":"16px"}},Be={style:{"margin-top":"16px"}},Ge={style:{"margin-top":"16px"}},Xe={key:0,class:"timeline-section"},He={key:0},ze={class:"logistics-timeline"},qe={class:"timeline-header"},Je={class:"tracking-number"},Ke={class:"logistics-content-wrapper"},Qe={class:"logistics-info"},We={class:"info-card"},Ze={class:"card-header"},ea={class:"card-content"},aa={class:"info-row"},sa={class:"label"},ta={class:"value"},ia={class:"info-row"},la={class:"label"},ra={class:"info-row"},na={class:"label"},oa={class:"value"},ca={class:"logistics-timeline-container"},da={class:"timeline-title"},ua={class:"logistics-item"},pa={class:"logistics-content"},ma={key:0,class:"logistics-location"},va={key:1,class:"loading-container"},Ea={key:2,class:"no-logistics-data"},ga={key:1,class:"timeline-section"},_a=t({__name:"OrderDetail",setup(e){const a=new G,{t:s}=_(),t=I(),v=y(),P=R(null),A=R({}),L=R(null),F=R(!1),k=e=>{if(!e)return"-";const a=new Date(e);return a.toLocaleDateString()+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},M=R(""),b=f(()=>B(P.value)),w=new z,Y=e=>{F.value=!0,w.getLogisticsByOrderId({orderId:e}).then(e=>{F.value=!1,0===e.code&&e.data?L.value=e.data:L.value=null}).catch(e=>{F.value=!1,L.value=null})};D(()=>P.value,e=>{!e||"yfh"!==b.value.type&&"yjs"!==b.value.type||Y(e.id)},{deep:!0});const X=()=>{v.push({name:"order-management"})};return N(()=>{const e=t.params.orderId;M.value=e,(()=>{let e={id:M.value};a.getOrderDetail(e).then(e=>{P.value=e.data,A.value=P.value?.order_info?.shipping,!P.value||"yfh"!==b.value.type&&"yjs"!==b.value.type||Y(P.value.id)})})()}),(e,a)=>{const t=C,v=V,_=T,I=O,y=S,R=j,f=U;return P.value?(l(),i("div",De,[r("div",Ne,[r("div",Oe,[n(v,{text:"",onClick:X,class:"back-btn"},{default:c(()=>[n(t,null,{default:c(()=>[n(m(x))]),_:1}),E(" "+o(m(s)("orderManagement.title"))+"#"+o(P.value.order_no),1)]),_:1})]),n(_,{type:b.value.status,size:"large"},{default:c(()=>[E(o(m(s)(b.value.label)),1)]),_:1},8,["type"])]),r("div",Te,[r("div",Ce,[r("h3",Pe,o(m(s)("orderManagement.order.products")),1),r("div",Se,[r("div",he,[r("img",{src:P.value?.order_info?.modelData?.imageUrl,alt:P.value.order_info.ipName,class:"product-image"},null,8,Ae),r("div",Le,[r("span",Fe,o(P.value.order_info.ipName),1),r("span",ke,"x"+o(P.value.order_info.quantity),1)]),r("div",Me,o(P.value.currency)+" "+o(Number(P.value.actual_amount).toFixed(2)),1)])])]),r("div",be,[r("h3",we,o(m(s)("orderManagement.order.payment")),1),r("div",Ye,[r("p",null,[r("strong",null,o(m(s)("orderManagement.order.paymentMethod"))+":",1),E(" "+o(P.value.currency),1)]),r("p",null,[r("strong",null,o(m(s)("orderManagement.order.paymentStatus"))+":",1),E(" "+o(m(s)(b.value.label)),1)]),P.value.payment_time?(l(),i("p",xe,[r("strong",null,o(m(s)("orderManagement.order.paidAt"))+":",1),E(" "+o(k(P.value.payment_time)),1)])):g("",!0)]),"zfgq"==b.value.type?(l(),i("div",Ve,[n(t,null,{default:c(()=>[n(m($))]),_:1}),r("span",null,o(m(s)("orderManagement.expiredNotice")),1)])):g("",!0)]),r("div",$e,[r("h3",je,o(m(s)("orderManagement.order.shipping")),1),r("p",Ue,[r("strong",null,o(m(s)("orderManagement.order.recipient"))+"：",1),E(" "+o(A.value?.firstName+A.value?.lastName||"-"),1)]),r("p",Be,[r("strong",null,o(m(s)("orderManagement.order.phone"))+"：",1),E(" "+o(A.value?.phone||"-"),1)]),r("p",Ge,[r("strong",null,o(m(s)("orderManagement.order.address"))+"：",1),E(" "+o(A.value?.countryLabel+A.value?.address1+A.value?.address2+A.value?.city||"-"),1)])])]),"yfh"===b.value.type||"yjs"===b.value.type?(l(),i("div",Xe,[L.value?(l(),i("div",He,[r("div",ze,[r("div",qe,[r("h3",null,o(e.$t("logistics.title")),1),r("span",Je,o(e.$t("logistics.trackingNumber"))+": "+o(L.value.trackingNo),1)]),r("div",Ke,[r("div",Qe,[r("div",We,[r("div",Ze,[n(t,null,{default:c(()=>[n(m(h))]),_:1}),r("span",null,o(e.$t("logistics.carrierInfo")),1)]),r("div",ea,[r("div",aa,[r("span",sa,o(e.$t("logistics.carrier"))+":",1),r("span",ta,o(L.value.logisticsCompany),1)]),r("div",ia,[r("span",la,o(e.$t("logistics.status"))+":",1),n(_,{type:4===L.value.logisticsStatus?"success":"info"},{default:c(()=>[E(o(L.value.logisticsStatusText),1)]),_:1},8,["type"])]),r("div",ra,[r("span",na,o(e.$t("logistics.trackingNumber"))+":",1),r("span",oa,o(L.value.trackingNo),1)])])])]),r("div",ca,[r("div",da,o(e.$t("logistics.timeline")),1),n(y,null,{default:c(()=>[(l(!0),i(d,null,u(L.value.traces.slice().reverse(),(e,a)=>(l(),p(I,{key:a,timestamp:e.time,type:0===a?"success":"primary"},{default:c(()=>[r("div",ua,[r("div",pa,o(e.description),1),e.location?(l(),i("div",ma,o(e.location),1)):g("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])])])])):F.value?(l(),i("div",va,[n(R,{rows:10,animated:""})])):(l(),i("div",Ea,[n(f,{description:"暂无物流信息"})]))])):g("",!0),!P.value.timelineEvents||"paid"!==P.value.status&&"shipped"!==P.value.status&&"completed"!==P.value.status?g("",!0):(l(),i("div",ga,[n(fe,{"order-id":P.value.id,"tracking-number":P.value.tracking?.number||"","timeline-events":P.value.timelineEvents,"logistics-info":P.value.logisticsInfo||{}},null,8,["order-id","tracking-number","timeline-events","logistics-info"])]))])):g("",!0)}}},[["__scopeId","data-v-23dc680c"]]);export{_a as default};
