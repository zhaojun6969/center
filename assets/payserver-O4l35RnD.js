import{r as e,i as t}from"./index-BXg9AdUO.js";class i{static stripe=null;static isInitializing=!1;static initPromise=null;constructor(){}async init(){}async createPaymentIntent(e,t="usd",n={}){return await this.init(),new Promise(async(e,t)=>{let n={client_secret:"pi_3SZS2UG9Oq8PDokQ1mYY4ntx_secret_pAE1H7ySo6EN1XO1lRsj5SWYn"};{const t=i.stripe.elements({clientSecret:n.client_secret,appearance:{theme:"stripe"}});e({client_secret:n.client_secret,element:t,cardElement:t.create("payment")})}})}async confirmPaymentIntent(e,t){return await this.init(),new Promise(async(n,r)=>{const{error:s,paymentIntent:c}=await i.stripe.confirmPayment({elements:e,confirmParams:{receipt_email:t},redirect:"if_required"});s?r(s.message):c&&"succeeded"===c.status&&n({paymentIntent:c})})}async createCheckoutSession(n){return await this.init(),new Promise(async(r,s)=>{let c={payment_method_types:["card"],line_items:n,success_url:"",cancel_url:"",mode:"payment"},a=await e.common(t.createCheckoutSession,c);if(0===a.code){let{id:e}=a.data;const{error:t}=await i.stripe.redirectToCheckout({sessionId:e});t?s(t.message):r(e)}else s(a.msg)})}async createPayorOrder(i,n=1){let r="";return new Promise(async(s,c)=>{let a={};switch(n){case 1:r=`${window.location.origin}/#/order-management`,a={product_id:i.product_id,methods:["card"],success_url:r,cancel_url:r,quantity:i.quantity,project_id:i.project_id,project_details:i.project_details,order_info:i.order_info,coupon_ids:i.coupon_ids||[]},i.shop_id&&(a.shop_id=i.shop_id);break;case 2:r=`${window.location.origin}/#/user-center`,a={package_id:i.package_id,methods:["card"],success_url:r,cancel_url:r,coupon_ids:i.coupon_ids||[]}}let o={1:t.createPayorOrder,2:t.CREATE_RECHARGE_ORDER}[n],d=await e.common(o,a);if(0==d.code){let e=d.data;const t=e.url||e.payment_url;if(!t)return void(window.location.href=r);1==n?window.location.href=t:window.open(t,"_blank"),s(e)}else c(d.msg)})}}export{i as P};
